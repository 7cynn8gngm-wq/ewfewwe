<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Личный кабинет - Кинотеатр "КиноМир"</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Open+Sans:wght@400;500&display=swap" rel="stylesheet" crossorigin="anonymous">
</head>
<style>
    /* Обновленная цветовая палитра и переменные в стиле index.html */
    :root {
        --primary-blue: #0f1c2e;
        --primary-blue-light: #1a2d4a;
        --accent-orange: #e50914;
        --accent-orange-light: #ff4d4d;
        --accent-teal: #00b4d8;
        --accent-purple: #6a0dad;
        --background: #0a0f1c;
        --background-gradient: linear-gradient(135deg, #0a0f1c 0%, #1a2d4a 100%);
        --text-primary: #ffffff;
        --text-secondary: #b0b8c5;
        --success: #10b981;
        --warning: #f59e0b;
        --error: #ef4444;
        --white: #FFFFFF;
        --gray-light: #1e293b;
        --gray-medium: #334155;
        --table-header: #16253d;
        --table-row-hover: rgba(0, 180, 216, 0.08);
        
        /* ТИПОГРАФИКА */
        --font-heading: 'Montserrat', sans-serif;
        --font-body: 'Open Sans', sans-serif;
        
        /* ТЕНИ И СКРУГЛЕНИЯ */
        --shadow-sm: 0 1px 3px rgba(0,0,0,0.5);
        --shadow-md: 0 4px 12px rgba(0,0,0,0.7);
        --shadow-lg: 0 10px 25px rgba(0,0,0,0.8);
        --shadow-xl: 0 20px 40px rgba(0,0,0,0.9);
        --border-radius: 10px;
        --border-radius-lg: 16px;
    }
    
    /* Базовые стили в стиле index.html */
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }
    
    html {
        scroll-behavior: smooth;
        scroll-padding-top: 80px;
    }
    
    body {
        animation: pageFade 0.5s ease-in-out;
        font-family: var(--font-body);
        background: var(--background-gradient);
        color: var(--text-primary);
        line-height: 1.6;
        padding-top: 80px;
    }

    /* Плавающие элементы для фона как в index.html */
    .floating-elements {
        position: fixed;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        pointer-events: none;
        z-index: -1;
        overflow: hidden;
    }

    .floating-element {
        position: absolute;
        border-radius: 50%;
        background: rgba(229, 9, 20, 0.05);
        animation: float 15s ease-in-out infinite;
    }
    
    .container {
        width: 100%;
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
    }
    
    h1, h2, h3, h4, h5, h6 {
        font-family: var(--font-heading);
        margin-bottom: 0.5em;
        font-weight: 600;
    }
    
    p {
        margin-bottom: 1em;
    }
    
    /* Стили шапки в стиле index.html */
    header {
        background: rgba(15, 28, 46, 0.95);
        backdrop-filter: blur(10px);
        padding: 15px 0;
        box-shadow: var(--shadow-md);
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 1000;
        transition: all 0.3s ease;
    }
    
    .header-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .logo-text {
        font-family: var(--font-heading);
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--text-primary);
        position: relative;
        display: inline-block;
    }
    
    .logo-text::after {
        content: '';
        position: absolute;
        bottom: -5px;
        left: 0;
        width: 0;
        height: 3px;
        background: linear-gradient(90deg, var(--accent-orange), var(--accent-teal));
        transition: width 0.5s ease;
    }
    
    .logo-text:hover::after {
        width: 100%;
    }
    
    .logo-accent {
        background: linear-gradient(90deg, var(--accent-orange), var(--accent-teal));
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
    }
    
    .nav-menu {
        display: flex;
        list-style: none;
        gap: 30px;
    }
    
    .nav-menu a {
        color: var(--text-primary);
        text-decoration: none;
        font-weight: 500;
        transition: color 0.3s ease;
        position: relative;
        padding: 0.5rem 0;
    }
    
    .nav-menu a:hover {
        color: var(--accent-orange);
    }
    
    .nav-menu a::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 2px;
        background-color: var(--accent-orange);
        transform: scaleX(0);
        transition: transform 0.3s ease;
    }
    
    .nav-menu a:hover::after {
        transform: scaleX(1);
    }
    
    .header-actions {
        display: flex;
        align-items: center;
        gap: 15px;
    }
    
    .phone-link {
        color: var(--text-primary);
        text-decoration: none;
        display: flex;
        align-items: center;
        gap: 8px;
        font-weight: 500;
        transition: color 0.3s ease;
    }
    
    .phone-link:hover {
        color: var(--accent-orange);
    }
    
    .mobile-menu-btn {
        display: none;
        background: none;
        border: none;
        color: var(--text-primary);
        font-size: 1.5rem;
        cursor: pointer;
    }
    
    /* Кнопки в стиле index.html */
    .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 12px 24px;
        border: none;
        border-radius: var(--border-radius);
        font-family: var(--font-heading);
        font-weight: 600;
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
        gap: 8px;
        text-align: center;
        position: relative;
        overflow: hidden;
    }

    .btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
        transition: left 0.5s ease;
    }

    .btn:hover::before {
        left: 100%;
    }

    .btn-primary {
        background: linear-gradient(135deg, var(--accent-orange) 0%, var(--accent-orange-light) 100%);
        color: var(--white);
        box-shadow: 0 4px 15px rgba(229, 9, 20, 0.3);
    }

    .btn-primary:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 20px rgba(229, 9, 20, 0.4);
    }
    
    .btn-outline {
        background-color: transparent;
        border: 2px solid var(--accent-orange);
        color: var(--accent-orange);
    }

    .btn-outline:hover {
        background-color: var(--accent-orange);
        color: var(--white);
        transform: translateY(-2px);
    }
    
    .btn-sm {
        padding: 8px 16px;
        font-size: 0.875rem;
    }

    /* Стили основного контента */
    .dashboard {
        padding: 30px 0;
    }
    
    .dashboard-container {
        display: grid;
        grid-template-columns: 280px 1fr;
        gap: 30px;
    }
    
    /* Обновленные стили бокового меню в стиле index.html */
    .sidebar {
    background: var(--gray-light);
    border-radius: var(--border-radius-lg);
    padding: 20px 0;
    box-shadow: var(--shadow-lg);
    position: sticky;
    top: 90px;
    height: fit-content;
    border: 1px solid var(--gray-medium);
    animation: slideInUp 0.6s ease;
    position: relative;
    overflow: hidden;
}
    
    .sidebar::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, var(--accent-orange), var(--accent-teal), var(--accent-purple));
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.5s ease;
}
    
    .sidebar:hover::before {
    transform: scaleX(1);
}
    
    .sidebar-menu {
    list-style: none;
    padding: 0;
    margin: 20px 0 0;
}

.sidebar-item {
    margin-bottom: 5px;
    position: relative;
}

.sidebar-link {
    display: flex;
    align-items: center;
    padding: 12px 20px;
    color: var(--text-secondary);
    text-decoration: none;
    transition: all 0.3s ease;
    font-weight: 500;
    position: relative;
    z-index: 1;
    border-radius: 0;
}
    
    .sidebar-link::before {
    content: '';
    position: absolute;
    top: 0;
    left: -10px;
    right: -10px;
    bottom: 0;
    background: linear-gradient(90deg, 
        rgba(229, 9, 20, 0.1) 0%, 
        rgba(0, 180, 216, 0.15) 50%, 
        rgba(106, 13, 173, 0.1) 100%);
    border-radius: 12px;
    z-index: -1;
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.4s cubic-bezier(0.23, 1, 0.32, 1);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}

.sidebar-link::after {
    content: '';
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 3px;
    height: 0;
    background: linear-gradient(to bottom, var(--accent-orange), var(--accent-teal));
    border-radius: 0 4px 4px 0;
    transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
    opacity: 0;
}

.sidebar-link:hover {
    background: transparent;
    color: var(--text-primary);
    transform: translateX(5px);
}

.sidebar-link:hover::before {
    transform: scaleX(1);
}

.sidebar-link:hover::after {
    height: 60%;
    opacity: 1;
}

.sidebar-link.active {
    background: transparent;
    color: var(--text-primary);
}

.sidebar-link.active::before {
    transform: scaleX(1);
    background: linear-gradient(90deg, 
        rgba(229, 9, 20, 0.15) 0%, 
        rgba(0, 180, 216, 0.2) 50%, 
        rgba(106, 13, 173, 0.15) 100%);
    border: 1px solid rgba(255, 255, 255, 0.15);
}

.sidebar-link.active::after {
    height: 70%;
    opacity: 1;
    background: linear-gradient(to bottom, var(--accent-orange), var(--accent-teal), var(--accent-purple));
}

.sidebar-link i {
    margin-right: 12px;
    width: 20px;
    text-align: center;
    font-size: 1.1em;
    transition: transform 0.3s ease;
    position: relative;
    z-index: 2;
}

.sidebar-link:hover i {
    transform: scale(1.1);
    color: var(--accent-teal);
}

.sidebar-link.active i {
    color: var(--accent-teal);
    transform: scale(1.1);
}

/* Анимация для плавного появления */
@keyframes menuGlow {
    0% {
        transform: scaleX(0);
        opacity: 0;
    }
    50% {
        opacity: 0.5;
    }
    100% {
        transform: scaleX(1);
        opacity: 1;
    }
}

.sidebar-link:hover::before {
    animation: menuGlow 0.4s cubic-bezier(0.23, 1, 0.32, 1) forwards;
}
    
    .user-info {
    padding: 0 20px 20px;
    border-bottom: 1px solid var(--gray-medium);
    position: relative;
}

.user-info::after {
    content: '';
    position: absolute;
    bottom: -1px;
    left: 20px;
    right: 20px;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--accent-teal), transparent);
}
    
    .user-info h3 {
    margin: 0 0 5px;
    color: var(--text-primary);
    font-size: 1.2em;
    font-weight: 600;
}
    
    .user-info p {
    margin: 0;
    color: var(--text-secondary);
    font-size: 0.9em;
    display: flex;
    align-items: center;
    gap: 5px;
}

.user-info p::before {
    content: '★';
    color: var(--accent-orange);
    font-size: 1.1em;
}
    
    /* Стили для основного контента */
    .dashboard-content {
        min-height: 600px;
    }
    
    .content-section {
        display: block;
        animation: fadeIn 0.5s ease forwards;
    }
    
    .page-header {
        margin-bottom: 30px;
    }
    
    .page-header h1 {
        font-size: 2rem;
        margin-bottom: 10px;
    }
    
    .page-header p {
        color: var(--text-secondary);
        font-size: 1.1rem;
    }
    
    /* Карточка баланса в стиле index.html */
    .balance-card {
        background: var(--gray-light);
        border-radius: var(--border-radius-lg);
        padding: 25px;
        margin-bottom: 25px;
        box-shadow: var(--shadow-md);
        border-left: 4px solid var(--accent-teal);
        animation: slideInUp 0.6s ease;
        border: 1px solid var(--gray-medium);
    }
    
    .balance-title {
        font-size: 1em;
        color: var(--text-secondary);
        margin-bottom: 10px;
        font-weight: 500;
    }
    
    .balance-amount {
        font-size: 2.2em;
        font-weight: 700;
        color: var(--text-primary);
        margin-bottom: 15px;
    }
    
    .balance-status {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
    }
    
    /* Улучшенные бейджи статусов */
    .status-badge {
        display: inline-flex;
        align-items: center;
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 0.85em;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }
    
    .status-completed {
        background: rgba(16, 185, 129, 0.15);
        color: var(--success);
        border: 1px solid rgba(16, 185, 129, 0.3);
    }
    
    .status-warning {
        background: rgba(245, 158, 11, 0.15);
        color: var(--warning);
        border: 1px solid rgba(245, 158, 11, 0.3);
    }
    
    .status-success {
        background: rgba(16, 185, 129, 0.15);
        color: var(--success);
        border: 1px solid rgba(16, 185, 129, 0.3);
    }
    
    /* Быстрые действия в стиле index.html */
    .quick-actions {
        margin-bottom: 30px;
    }
    
    .actions-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 15px;
        margin-top: 15px;
    }
    
    .action-card {
        background: var(--gray-light);
        border: none;
        border-radius: var(--border-radius);
        padding: 20px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: var(--shadow-sm);
        border: 1px solid var(--gray-medium);
        animation: slideInUp 0.6s ease;
    }
    
    .action-card:hover {
        transform: translateY(-5px);
        box-shadow: var(--shadow-lg);
        background: var(--primary-blue);
    }
    
    .action-icon {
        font-size: 2em;
        color: var(--accent-teal);
        margin-bottom: 10px;
        transition: all 0.3s ease;
    }
    
    .action-card:hover .action-icon {
        transform: scale(1.1) rotate(5deg);
        color: var(--accent-orange);
    }
    
    .action-title {
        font-weight: 600;
        color: var(--text-primary);
    }
    
    /* Обновленные стили для таблицы "Активные билеты" в стиле index.html */
    .history-section {
        margin-top: 30px;
    }
    
    .table-container {
        background: var(--gray-light);
        border-radius: var(--border-radius-lg);
        overflow: hidden;
        box-shadow: var(--shadow-md);
        margin-top: 15px;
        border: 1px solid var(--gray-medium);
        animation: slideInUp 0.7s ease;
    }
    
    .table {
        width: 100%;
        border-collapse: collapse;
        color: var(--text-primary);
        font-family: var(--font-body);
    }
    
    .table thead {
        background: var(--table-header);
    }
    
    .table th {
        padding: 16px 15px;
        text-align: left;
        font-weight: 600;
        font-size: 0.9em;
        color: var(--text-secondary);
        text-transform: uppercase;
        letter-spacing: 0.5px;
        border-bottom: 1px solid var(--gray-medium);
    }
    
    .table td {
        padding: 18px 15px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        vertical-align: middle;
    }
    
    .table tbody tr {
        transition: all 0.3s ease;
        background: transparent;
    }
    
    .table tbody tr:last-child td {
        border-bottom: none;
    }
    
    .table tbody tr:hover {
        background: var(--table-row-hover) !important;
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    
    /* Стили для кнопок в таблице с уменьшенным интервалом */
    .table-actions {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
        align-items: center;
    }
    
    /* Стили для модального окна QR-кода в стиле index.html */
    .qr-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        z-index: 1000;
        align-items: center;
        justify-content: center;
        backdrop-filter: blur(5px);
        opacity: 0;
        transition: opacity 0.3s ease;
    }
    
    .qr-modal.active {
        display: flex;
        opacity: 1;
    }
    
    .qr-modal-content {
        background: var(--gray-light);
        border-radius: var(--border-radius-lg);
        padding: 30px;
        max-width: 400px;
        width: 90%;
        text-align: center;
        box-shadow: var(--shadow-xl);
        transform: scale(0.9);
        transition: transform 0.3s ease;
        position: relative;
        border: 1px solid var(--gray-medium);
    }
    
    .qr-modal.active .qr-modal-content {
        transform: scale(1);
    }
    
    .qr-modal-close {
        position: absolute;
        top: 15px;
        right: 15px;
        background: none;
        border: none;
        color: var(--text-secondary);
        font-size: 1.5rem;
        cursor: pointer;
        transition: color 0.2s ease;
    }
    
    .qr-modal-close:hover {
        color: var(--text-primary);
    }
    
    .qr-code-container {
        background: white;
        padding: 20px;
        border-radius: var(--border-radius);
        margin: 20px 0;
        display: inline-block;
    }
    
    .qr-code-image {
        width: 200px;
        height: 200px;
        object-fit: contain;
        display: block;
    }
    
    .text-secondary {
        color: var(--text-secondary);
        font-size: 0.9em;
    }
    
    /* Стили для модального окна возврата билета */
    .refund-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        z-index: 1000;
        align-items: center;
        justify-content: center;
        backdrop-filter: blur(5px);
        opacity: 0;
        transition: opacity 0.3s ease;
    }
    
    .refund-modal.active {
        display: flex;
        opacity: 1;
    }
    
    .refund-modal-content {
        background: var(--gray-light);
        border-radius: var(--border-radius-lg);
        padding: 30px;
        max-width: 500px;
        width: 90%;
        box-shadow: var(--shadow-xl);
        transform: scale(0.9);
        transition: transform 0.3s ease;
        position: relative;
        border: 1px solid var(--gray-medium);
    }
    
    .refund-modal.active .refund-modal-content {
        transform: scale(1);
    }
    
    .refund-modal-close {
        position: absolute;
        top: 15px;
        right: 15px;
        background: none;
        border: none;
        color: var(--text-secondary);
        font-size: 1.5rem;
        cursor: pointer;
        transition: color 0.2s ease;
    }
    
    .refund-modal-close:hover {
        color: var(--text-primary);
    }
    
    .refund-details {
        background: var(--primary-blue);
        border-radius: var(--border-radius);
        padding: 20px;
        margin: 20px 0;
    }
    
    .refund-detail-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
        padding-bottom: 10px;
        border-bottom: 1px solid var(--gray-medium);
    }
    
    .refund-detail-row:last-child {
        margin-bottom: 0;
        padding-bottom: 0;
        border-bottom: none;
    }
    
    .refund-detail-label {
        color: var(--text-secondary);
        font-weight: 500;
    }
    
    .refund-detail-value {
        color: var(--text-primary);
        font-weight: 600;
    }
    
    .refund-actions {
        display: flex;
        gap: 15px;
        justify-content: flex-end;
        margin-top: 25px;
    }
    
    .refund-warning {
        background: rgba(245, 158, 11, 0.1);
        border-left: 4px solid var(--warning);
        padding: 15px;
        border-radius: var(--border-radius);
        margin: 15px 0;
    }
    
    .refund-success {
        background: rgba(16, 185, 129, 0.1);
        border-left: 4px solid var(--success);
        padding: 15px;
        border-radius: var(--border-radius);
        margin: 15px 0;
    }
    
    /* ОБНОВЛЕННЫЕ СТИЛИ ДЛЯ МОДАЛЬНОГО ОКНА ИСПОЛЬЗОВАНИЯ БОНУСОВ */
    .bonus-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        z-index: 1000;
        align-items: center;
        justify-content: center;
        backdrop-filter: blur(5px);
        opacity: 0;
        transition: opacity 0.3s ease;
    }
    
    .bonus-modal.active {
        display: flex;
        opacity: 1;
    }
    
    .bonus-modal-content {
        background: var(--gray-light);
        border-radius: var(--border-radius-lg);
        padding: 30px;
        max-width: 600px;
        width: 90%;
        max-height: 85vh;
        box-shadow: var(--shadow-xl);
        transform: scale(0.9);
        transition: transform 0.3s ease;
        position: relative;
        border: 1px solid var(--gray-medium);
        display: flex;
        flex-direction: column;
    }
    
    .bonus-modal.active .bonus-modal-content {
        transform: scale(1);
    }
    
    .bonus-modal-close {
        position: absolute;
        top: 15px;
        right: 15px;
        background: none;
        border: none;
        color: var(--text-secondary);
        font-size: 1.5rem;
        cursor: pointer;
        transition: color 0.2s ease;
        z-index: 10;
    }
    
    .bonus-modal-close:hover {
        color: var(--text-primary);
    }
    
    .bonus-details {
        background: var(--primary-blue);
        border-radius: var(--border-radius);
        padding: 20px;
        margin: 20px 0;
    }
    
    .bonus-detail-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
        padding-bottom: 10px;
        border-bottom: 1px solid var(--gray-medium);
    }
    
    .bonus-detail-row:last-child {
        margin-bottom: 0;
        padding-bottom: 0;
        border-bottom: none;
    }
    
    .bonus-detail-label {
        color: var(--text-secondary);
        font-weight: 500;
    }
    
    .bonus-detail-value {
        color: var(--text-primary);
        font-weight: 600;
    }
    
    /* ОБНОВЛЕННЫЕ СТИЛИ ДЛЯ КНОПОК БОНУСОВ */
    .bonus-actions {
        display: flex;
        gap: 15px;
        justify-content: flex-end;
        margin-top: 25px;
        padding-top: 20px;
        border-top: 1px solid var(--gray-medium);
        position: sticky;
        bottom: 0;
        background: var(--gray-light);
        opacity: 1;
        transform: translateY(0);
        pointer-events: all;
    }
    
    /* Контейнер для контента с прокруткой */
    .bonus-content-scrollable {
        flex: 1;
        overflow-y: auto;
        max-height: calc(85vh - 120px);
        padding-right: 10px;
        scrollbar-width: thin;
        scrollbar-color: var(--accent-teal) var(--gray-medium);
    }
    
    /* Стилизация ползунка прокрутки для WebKit браузеров */
    .bonus-content-scrollable::-webkit-scrollbar {
        width: 8px;
    }
    
    .bonus-content-scrollable::-webkit-scrollbar-track {
        background: var(--gray-medium);
        border-radius: 4px;
    }
    
    .bonus-content-scrollable::-webkit-scrollbar-thumb {
        background: var(--accent-teal);
        border-radius: 4px;
    }
    
    .bonus-content-scrollable::-webkit-scrollbar-thumb:hover {
        background: var(--accent-orange);
    }
    
    .bonus-info {
        background: rgba(0, 180, 216, 0.1);
        border-left: 4px solid var(--accent-teal);
        padding: 15px;
        border-radius: var(--border-radius);
        margin: 15px 0;
    }
    
    .bonus-success {
        background: rgba(16, 185, 129, 0.1);
        border-left: 4px solid var(--success);
        padding: 15px;
        border-radius: var(--border-radius);
        margin: 15px 0;
    }
    
    /* Стили для выбора количества бонусов */
    .bonus-selection {
        margin: 20px 0;
    }
    
    .bonus-slider {
        width: 100%;
        margin: 15px 0;
    }
    
    .bonus-options {
        display: flex;
        gap: 10px;
        margin: 15px 0;
        flex-wrap: wrap;
    }
    
    .bonus-option {
        flex: 1;
        min-width: 100px;
        text-align: center;
        padding: 10px;
        background: var(--primary-blue);
        border: 1px solid var(--gray-medium);
        border-radius: var(--border-radius);
        cursor: pointer;
        transition: all 0.3s ease;
    }
    
    .bonus-option:hover {
        border-color: var(--accent-teal);
        background: rgba(0, 180, 216, 0.1);
    }
    
    .bonus-option.selected {
        border-color: var(--accent-teal);
        background: rgba(0, 180, 216, 0.2);
        box-shadow: 0 0 0 2px rgba(0, 180, 216, 0.3);
    }
    
    .bonus-amount-display {
        text-align: center;
        font-size: 1.5rem;
        font-weight: 700;
        margin: 15px 0;
        color: var(--accent-teal);
    }
    
    .bonus-summary {
        margin-top: 20px;
        padding-top: 15px;
        border-top: 1px solid var(--gray-medium);
    }
    
    /* Уведомления */
    .notification {
        position: fixed;
        top: 100px;
        right: 20px;
        padding: 15px 20px;
        border-radius: var(--border-radius);
        box-shadow: var(--shadow-lg);
        z-index: 1100;
        display: flex;
        align-items: center;
        gap: 10px;
        transform: translateX(400px);
        transition: transform 0.4s ease;
        max-width: 400px;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    
    .notification:hover {
        transform: translateX(-5px);
    }
    
    .notification.show {
        transform: translateX(0);
    }
    
    .notification.success {
        background: var(--success);
        color: white;
    }
    
    .notification.error {
        background: var(--error);
        color: white;
    }
    
    .notification.warning {
        background: var(--warning);
        color: white;
    }
    
    .notification.info {
        background: var(--accent-teal);
        color: white;
    }
    
    .notification-icon {
        font-size: 1.2rem;
    }
    
    /* Стили для других разделов в стиле index.html */
    .info-card {
        background: var(--gray-light);
        border-radius: var(--border-radius);
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: var(--shadow-sm);
        border: 1px solid var(--gray-medium);
        animation: slideInUp 0.6s ease;
    }
    
    .info-card.warning {
        border-left: 4px solid var(--warning);
    }
    
    .info-card.success {
        border-left: 4px solid var(--success);
    }
    
    .info-header {
        display: flex;
        align-items: center;
        margin-bottom: 15px;
    }
    
    .info-header h3 {
        margin-bottom: 0;
        display: flex;
        align-items: center;
        gap: 10px;
    }
    
    .balance-summary {
        padding: 15px 0;
    }
    
    .summary-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
        padding: 8px 0;
    }
    
    .summary-row:last-child {
        margin-bottom: 0;
    }
    
    .summary-row span:first-child {
        font-weight: 500;
        color: var(--text-secondary);
        min-width: 30px;
    }
    
    .summary-row .amount-due {
        font-weight: 700;
        font-size: 1.1em;
        color: var(--accent-orange);
        text-align: right;
        margin-left: 10px;
    }
    
    /* Стили для раздела настроек в стиле index.html */
    .profile-layout {
        display: grid;
        grid-template-columns: 250px 1fr;
        gap: 30px;
    }
    
    .profile-sidebar {
        background: var(--gray-light);
        border-radius: var(--border-radius);
        padding: 20px;
        height: fit-content;
        border: 1px solid var(--gray-medium);
        animation: slideInUp 0.6s ease;
    }
    
    .profile-nav {
        display: flex;
        flex-direction: column;
        gap: 5px;
    }
    
    .profile-nav-item {
        background: none;
        border: none;
        text-align: left;
        padding: 12px 15px;
        color: var(--text-secondary);
        cursor: pointer;
        border-radius: var(--border-radius);
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 10px;
    }
    
    .profile-nav-item:hover {
        background: rgba(255, 255, 255, 0.05);
        color: var(--text-primary);
    }
    
    .profile-nav-item.active {
        background: rgba(0, 180, 216, 0.1);
        color: var(--text-primary);
    }
    
    .profile-content {
        min-height: 500px;
    }
    
    .profile-tab {
        display: none;
    }
    
    .profile-tab.active {
        display: block;
    }
    
    .profile-card {
        background: var(--gray-light);
        border-radius: var(--border-radius);
        overflow: hidden;
        box-shadow: var(--shadow-sm);
        margin-bottom: 20px;
        border: 1px solid var(--gray-medium);
        animation: slideInUp 0.6s ease;
    }
    
    .card-header {
        padding: 20px;
        background: var(--primary-blue);
        border-bottom: 1px solid var(--gray-medium);
    }
    
    .card-header h3 {
        margin: 0;
        display: flex;
        align-items: center;
        gap: 10px;
    }
    
    .profile-form {
        padding: 20px;
    }
    
    .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
    }
    
    .form-group {
        margin-bottom: 20px;
    }
    
    .form-label {
        display: block;
        margin-bottom: 8px;
        font-weight: 500;
        color: var(--text-secondary);
    }
    
    .form-control {
        width: 100%;
        padding: 12px 15px;
        background: var(--primary-blue);
        border: 1px solid var(--gray-medium);
        border-radius: var(--border-radius);
        color: var(--text-primary);
        font-family: var(--font-body);
        transition: all 0.3s ease;
    }
    
    .form-control:focus {
        outline: none;
        border-color: var(--accent-teal);
        box-shadow: 0 0 0 2px rgba(0, 180, 216, 0.2);
    }
    
    .form-actions {
        margin-top: 25px;
        padding-top: 20px;
        border-top: 1px solid var(--gray-medium);
    }
    
    .notifications-list {
        padding: 20px;
    }
    
    .notification-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px 0;
        border-bottom: 1px solid var(--gray-medium);
    }
    
    .notification-item:last-child {
        border-bottom: none;
    }
    
    .notification-info h4 {
        margin-bottom: 5px;
    }
    
    .notification-info p {
        margin: 0;
        color: var(--text-secondary);
        font-size: 0.9em;
    }
    
    .switch {
        position: relative;
        display: inline-block;
        width: 50px;
        height: 24px;
    }
    
    .switch input {
        opacity: 0;
        width: 0;
        height: 0;
    }
    
    .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: var(--gray-medium);
        transition: .4s;
        border-radius: 24px;
    }
    
    .slider:before {
        position: absolute;
        content: "";
        height: 16px;
        width: 16px;
        left: 4px;
        bottom: 4px;
        background-color: white;
        transition: .4s;
        border-radius: 50%;
    }
    
    input:checked + .slider {
        background-color: var(--accent-teal);
    }
    
    input:checked + .slider:before {
        transform: translateX(26px);
    }
    
    .security-actions {
        padding: 20px;
    }
    
    .security-btn {
        display: flex;
        align-items: center;
        width: 100%;
        padding: 15px;
        background: none;
        border: none;
        color: var(--text-primary);
        text-align: left;
        cursor: pointer;
        border-radius: var(--border-radius);
        transition: all 0.3s ease;
        margin-bottom: 10px;
    }
    
    .security-btn:hover {
        background: rgba(255, 255, 255, 0.05);
    }
    
    .security-icon {
        width: 40px;
        height: 40px;
        background: var(--primary-blue);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 15px;
        color: var(--accent-teal);
    }
    
    .security-info {
        flex: 1;
    }
    
    .security-info h4 {
        margin-bottom: 5px;
    }
    
    .security-info p {
        margin: 0;
        color: var(--text-secondary);
        font-size: 0.9em;
    }
    
    /* Стили для раздела истории просмотров в стиле index.html */
    .requests-filters {
        display: flex;
        gap: 20px;
        margin-bottom: 20px;
        flex-wrap: wrap;
    }
    
    .filter-group {
        display: flex;
        flex-direction: column;
        gap: 5px;
    }
    
    .filter-group label {
        font-weight: 500;
        color: var(--text-secondary);
        font-size: 0.9em;
    }
    
    .viewed-movies {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 20px;
    }
    
    .movie-card {
        background: var(--gray-light);
        border-radius: var(--border-radius);
        overflow: hidden;
        box-shadow: var(--shadow-md);
        transition: all 0.3s ease;
        border: 1px solid var(--gray-medium);
        animation: slideInUp 0.6s ease;
    }
    
    .movie-card:hover {
        transform: translateY(-5px);
        box-shadow: var(--shadow-lg);
    }
    
    .movie-poster {
        width: 100%;
        height: 200px;
        background: linear-gradient(135deg, var(--primary-blue) 0%, var(--primary-blue-light) 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--white);
        font-size: 3rem;
        position: relative;
        overflow: hidden;
    }
    
    .movie-poster img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.3s ease;
    }
    
    .movie-card:hover .movie-poster img {
        transform: scale(1.05);
    }
    
    /* УДАЛЕНЫ СТИЛИ ДЛЯ ИКОНКИ КИНОПЛЕНКИ */
    
    .movie-info {
        padding: 15px;
    }
    
    .movie-title {
        font-size: 1.2rem;
        margin-bottom: 8px;
        color: var(--text-primary);
    }
    
    .movie-meta {
        display: flex;
        justify-content: space-between;
        font-size: 0.9rem;
        color: var(--text-secondary);
        margin-bottom: 10px;
    }
    
    .movie-rating {
        display: flex;
        align-items: center;
        gap: 10px;
    }
    
    .stars {
        display: flex;
        gap: 2px;
    }
    
    .stars i {
        color: var(--text-secondary);
    }
    
    .stars i.rated {
        color: var(--warning);
    }

    /* Дополнительные стили для улучшенной функциональности */
    .no-results {
        text-align: center;
        padding: 40px;
        color: var(--text-secondary);
    }

    .no-results i {
        font-size: 3rem;
        margin-bottom: 1rem;
        opacity: 0.5;
    }

    /* Анимация для плавных переходов */
    .smooth-transition {
        transition: all 0.3s ease;
    }

    /* Стили для активных фильтров */
    .filter-group select:focus {
        border-color: var(--accent-teal);
        box-shadow: 0 0 0 2px rgba(0, 180, 216, 0.2);
    }

    /* Стили для кастомизированной сортировки */
    .sort-controls {
        display: flex;
        gap: 15px;
        margin-bottom: 20px;
        flex-wrap: wrap;
        align-items: center;
    }
    
    .sort-control {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 10px 15px;
        background: var(--primary-blue);
        border-radius: var(--border-radius);
        border: 1px solid var(--gray-medium);
        cursor: pointer;
        transition: all 0.3s ease;
    }
    
    .sort-control:hover {
        border-color: var(--accent-teal);
        background: rgba(0, 180, 216, 0.1);
    }
    
    .sort-control.active {
        border-color: var(--accent-teal);
        background: rgba(0, 180, 216, 0.2);
        box-shadow: 0 0 0 2px rgba(0, 180, 216, 0.3);
    }
    
    .sort-control i {
        color: var(--accent-teal);
        transition: transform 0.3s ease;
    }
    
    .sort-control.desc i {
        transform: rotate(180deg);
    }
    
    /* Адаптивность для модальных окон */
    @media (max-width: 768px) {
        .modal-content,
        .qr-modal-content,
        .refund-modal-content,
        .bonus-modal-content {
            margin: 10% auto;
            width: 95%;
            max-height: 90vh;
            overflow-y: auto;
        }
    }
    
    /* Стили подвала в стиле index.html */
    footer {
        background: linear-gradient(135deg, var(--primary-blue) 0%, #0a0f1c 100%);
        color: var(--white);
        padding: 3rem 0 2rem;
        position: relative;
        overflow: hidden;
        margin-top: 50px;
    }

    footer::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 100" preserveAspectRatio="none"><path d="M0,0 L1000,100 L0,100 Z" fill="rgba(255,255,255,0.05)"/></svg>');
        background-size: cover;
    }
    
    .footer-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 40px;
        margin-bottom: 30px;
        position: relative;
        z-index: 1;
    }
    
    .footer-title {
        color: var(--text-primary);
        margin-bottom: 20px;
        font-size: 1.2rem;
        position: relative;
        display: inline-block;
    }
    
    .footer-title::after {
        content: '';
        position: absolute;
        bottom: -5px;
        left: 0;
        width: 40px;
        height: 2px;
        background: var(--accent-orange);
    }
    
    .footer-contact {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 15px;
        color: var(--text-secondary);
        transition: color 0.3s ease;
    }
    
    .footer-contact:hover {
        color: var(--white);
    }
    
    .footer-contact i {
        color: var(--accent-orange);
    }
    
    .footer-bottom {
        text-align: center;
        padding-top: 20px;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        color: var(--text-secondary);
        font-size: 0.9em;
        position: relative;
        z-index: 1;
    }
    
    /* Анимации из index.html */
    @keyframes pageFade {
        from {
            opacity: 0;
            transform: translateY(10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes float {
        0%, 100% { transform: translateY(0) rotate(0deg); }
        50% { transform: translateY(-20px) rotate(10deg); }
    }

    @keyframes slideInUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }
    
    .page-transition {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: var(--primary-blue);
        z-index: 9999;
        transform: scaleY(0);
        transform-origin: bottom;
        transition: transform 0.6s ease-in-out;
    }
    
    .page-transition.active {
        transform: scaleY(1);
        transform-origin: top;
    }
    
    /* Стили для кастомного календаря */
    .datepicker-container {
        position: relative;
        display: inline-block;
        width: 100%;
    }
    
    .datepicker-toggle {
        position: absolute;
        right: 12px;
        top: 50%;
        transform: translateY(-50%);
        background: none;
        border: none;
        color: var(--text-secondary);
        cursor: pointer;
        font-size: 1.2rem;
        z-index: 2;
        transition: color 0.3s ease;
    }
    
    .datepicker-toggle:hover {
        color: var(--accent-teal);
    }
    
    /* Модальное окно календаря */
    .calendar-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        z-index: 1000;
        align-items: center;
        justify-content: center;
        backdrop-filter: blur(5px);
        opacity: 0;
        transition: opacity 0.3s ease;
    }
    
    .calendar-modal.active {
        display: flex;
        opacity: 1;
    }
    
    .calendar-modal-content {
        background: var(--gray-light);
        border-radius: var(--border-radius-lg);
        padding: 25px;
        max-width: 350px;
        width: 90%;
        box-shadow: var(--shadow-xl);
        transform: scale(0.9);
        transition: transform 0.3s ease;
        position: relative;
        border: 1px solid var(--gray-medium);
    }
    
    .calendar-modal.active .calendar-modal-content {
        transform: scale(1);
    }
    
    .calendar-modal-close {
        position: absolute;
        top: 15px;
        right: 15px;
        background: none;
        border: none;
        color: var(--text-secondary);
        font-size: 1.5rem;
        cursor: pointer;
        transition: color 0.2s ease;
    }
    
    .calendar-modal-close:hover {
        color: var(--text-primary);
    }
    
    .custom-datepicker {
        width: 100%;
    }
    
    .datepicker-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
    }
    
    .datepicker-nav {
        background: none;
        border: none;
        color: var(--text-secondary);
        cursor: pointer;
        font-size: 1.2rem;
        padding: 5px;
        border-radius: 4px;
        transition: all 0.3s ease;
    }
    
    .datepicker-nav:hover {
        background: var(--primary-blue);
        color: var(--text-primary);
    }
    
    .datepicker-current {
        font-weight: 600;
        color: var(--text-primary);
        font-size: 1.1rem;
    }
    
    .datepicker-weekdays {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        gap: 5px;
        margin-bottom: 10px;
    }
    
    .datepicker-weekday {
        text-align: center;
        font-size: 0.8rem;
        color: var(--text-secondary);
        font-weight: 500;
        padding: 5px 0;
    }
    
    .datepicker-days {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        gap: 5px;
    }
    
    .datepicker-day {
        text-align: center;
        padding: 10px 0;
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 0.9rem;
    }
    
    .datepicker-day:hover {
        background: var(--primary-blue);
    }
    
    .datepicker-day.selected {
        background: var(--accent-teal);
        color: var(--white);
        font-weight: 600;
    }
    
    .datepicker-day.other-month {
        color: var(--text-secondary);
        opacity: 0.5;
    }
    
    .datepicker-day.today {
        background: var(--accent-orange);
        color: var(--white);
        font-weight: 600;
    }
    
    .datepicker-day.disabled {
        color: var(--text-secondary);
        opacity: 0.3;
        cursor: not-allowed;
    }
    
    .datepicker-day.disabled:hover {
        background: transparent;
    }
    
    .datepicker-footer {
        margin-top: 15px;
        padding-top: 15px;
        border-top: 1px solid var(--gray-medium);
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .datepicker-today-btn {
        background: var(--primary-blue);
        border: 1px solid var(--gray-medium);
        color: var(--text-primary);
        padding: 6px 12px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 0.9rem;
        transition: all 0.3s ease;
    }
    
    .datepicker-today-btn:hover {
        background: var(--accent-teal);
        color: var(--white);
    }
    
    .datepicker-clear-btn {
        background: transparent;
        border: 1px solid var(--gray-medium);
        color: var(--text-secondary);
        padding: 6px 12px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 0.9rem;
        transition: all 0.3s ease;
    }
    
    .datepicker-clear-btn:hover {
        background: var(--error);
        color: var(--white);
        border-color: var(--error);
    }
    
    /* Новые стили для быстрого выбора года и месяца */
    .datepicker-controls {
        display: flex;
        gap: 10px;
        margin-bottom: 15px;
    }
    
    .datepicker-select {
        flex: 1;
        padding: 8px 10px;
        background: var(--primary-blue);
        border: 1px solid var(--gray-medium);
        border-radius: var(--border-radius);
        color: var(--text-primary);
        font-family: var(--font-body);
        transition: all 0.3s ease;
    }
    
    .datepicker-select:focus {
        outline: none;
        border-color: var(--accent-teal);
        box-shadow: 0 0 0 2px rgba(0, 180, 216, 0.2);
    }
    
    /* Адаптивность */
    @media (max-width: 992px) {
        .dashboard-container {
            grid-template-columns: 1fr;
        }
        
        .sidebar {
            position: static;
            margin-bottom: 20px;
        }
        
        .profile-layout {
            grid-template-columns: 1fr;
        }
        
        .profile-sidebar {
            order: 2;
        }
        
        .profile-content {
            order: 1;
        }
    }
    
    @media (max-width: 768px) {
        .header-container {
            flex-wrap: wrap;
        }
        
        .nav-menu {
            display: none;
        }
        
        .nav-menu.active {
            display: flex;
            flex-direction: column;
            width: 100%;
            margin-top: 20px;
        }
        
        .header-actions {
            display: none;
        }
        
        .header-actions.active {
            display: flex;
            width: 100%;
            margin-top: 15px;
            justify-content: center;
        }
        
        .mobile-menu-btn {
            display: block;
        }
        
        .table-container {
            overflow-x: auto;
        }
        
        .table {
            min-width: 700px;
        }
        
        .actions-grid {
            grid-template-columns: repeat(2, 1fr);
        }
        
        .form-row {
            grid-template-columns: 1fr;
        }
        
        .footer-container {
            grid-template-columns: 1fr;
            text-align: center;
        }
        
        .footer-contact {
            justify-content: center;
        }
        
        .table-actions {
            flex-direction: column;
            align-items: flex-start;
        }
        
        .refund-actions, .bonus-actions {
            flex-direction: column;
        }
        
        .bonus-options {
            flex-direction: column;
        }
        
        .sort-controls {
            flex-direction: column;
            align-items: flex-start;
        }
        
        .custom-datepicker {
            width: 100%;
            left: 0;
            right: 0;
        }
        
        .datepicker-controls {
            flex-direction: column;
        }
    }
    
    @media (max-width: 576px) {
        .actions-grid {
            grid-template-columns: 1fr;
        }
        
        .balance-status {
            flex-direction: column;
        }
        
        .requests-filters {
            flex-direction: column;
        }
    }

    /* Обновленные стили для уведомлений */
.booking-success-notification {
    position: fixed;
    top: 100px;
    right: 20px;
    background: var(--success);
    color: white;
    padding: 20px;
    border-radius: var(--border-radius-lg);
    box-shadow: var(--shadow-xl);
    z-index: 10000;
    max-width: 400px;
    transform: translateX(400px);
    transition: transform 0.3s ease;
}

.booking-success-notification.show {
    transform: translateX(0);
}

.notification-content {
    display: flex;
    align-items: flex-start;
    gap: 15px;
}

.notification-icon {
    font-size: 2rem;
    flex-shrink: 0;
}

.notification-text h3 {
    margin-bottom: 10px;
    color: white;
}

.notification-text p {
    margin-bottom: 5px;
    color: rgba(255, 255, 255, 0.9);
}

.notification-close {
    background: none;
    border: none;
    color: white;
    font-size: 1.2rem;
    cursor: pointer;
    padding: 5px;
    align-self: flex-start;
}

.tickets-count {
    margin: 10px 0;
    padding: 10px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: var(--border-radius);
    font-weight: 600;
}

/* Стили для отображения цены за билет */
.price-per-ticket {
    color: var(--accent-teal);
    font-weight: 600;
    margin: 5px 0;
}

.tickets-summary {
    background: rgba(0, 180, 216, 0.1);
    padding: 10px;
    border-radius: var(--border-radius);
    margin: 10px 0;
}
</style>
<body>
    <!-- Плавающие элементы фона как в index.html -->
    <div class="floating-elements" id="floatingElements"></div>
    
    <div class="page-transition"></div>
    
    <!-- Шапка сайта в стиле index.html -->
    <header>
        <div class="container header-container">
            <div class="logo">
                <div class="logo-text">Кинотеатр <span class="logo-accent">"КиноМир"</span></div>
            </div>
            
            <button class="mobile-menu-btn" aria-label="Открыть меню">
                <i class="fas fa-bars"></i>
            </button>
            
            <ul class="nav-menu">
                <li><a href="index.html">Главная</a></li>
                <li><a href="index.html#services">Фильмы</a></li>
                <li><a href="index.html#news">Новости</a></li>
                <li><a href="index.html#contacts">Контакты</a></li>
            </ul>
            
            <div class="header-actions">
                <a href="tel:+74951234567" class="phone-link">
                    <i class="fas fa-phone"></i> +7 (495) 123-45-67
                </a>
                <button id="logoutBtn" class="btn btn-primary" type="button">
                    <i class="fas fa-sign-out-alt"></i> Выйти
                </button>
            </div>
        </div>
    </header>

    <!-- Модальное окно для QR-кода -->
    <div class="qr-modal" id="qrModal">
        <div class="qr-modal-content">
            <button class="qr-modal-close" id="qrModalClose">
                <i class="fas fa-times"></i>
            </button>
            <h3>QR-код билета</h3>
            <div class="qr-code-container">
                <img id="qrCodeImage" class="qr-code-image" src="" alt="QR-код билета">
            </div>
            <p>Отсканируйте QR-код на входе в кинотеатр</p>
            <p class="text-secondary">Действителен до начала сеанса</p>
        </div>
    </div>

    <!-- Модальное окно для возврата билета -->
    <div class="refund-modal" id="refundModal">
        <div class="refund-modal-content">
            <button class="refund-modal-close" id="refundModalClose">
                <i class="fas fa-times"></i>
            </button>
            <h3>Возврат билета</h3>
            
            <div class="refund-details" id="refundDetails">
                <!-- Детали билета будут вставлены сюда через JavaScript -->
            </div>
            
            <div class="refund-warning">
                <p><i class="fas fa-exclamation-triangle"></i> <strong>Внимание!</strong> Возврат билетов возможен не позднее чем за 1 час до начала сеанса. При возврате взимается комиссия 10% от стоимости билета.</p>
            </div>
            
            <div class="refund-actions">
                <button class="btn btn-outline" id="cancelRefundBtn">Отмена</button>
                <button class="btn btn-primary" id="confirmRefundBtn">Подтвердить возврат</button>
            </div>
        </div>
    </div>

    <!-- ОБНОВЛЕННОЕ МОДАЛЬНОЕ ОКНО ДЛЯ ИСПОЛЬЗОВАНИЯ БОНУСОВ -->
    <div class="bonus-modal" id="bonusModal">
        <div class="bonus-modal-content">
            <button class="bonus-modal-close" id="bonusModalClose">
                <i class="fas fa-times"></i>
            </button>
            <h3>Использование бонусов</h3>
            
            <div class="bonus-content-scrollable" id="bonusScrollableContent">
                <div class="bonus-details" id="bonusDetails">
                    <!-- Детали билета и выбор бонусов будут вставлены сюда через JavaScript -->
                </div>
                
                <div class="bonus-info">
                    <p><i class="fas fa-info-circle"></i> <strong>Информация:</strong> Вы можете использовать до 50% стоимости билета бонусами. 1 бонус = 1 рубль.</p>
                </div>
            </div>
            
            <div class="bonus-actions" id="bonusActions">
                <button class="btn btn-outline" id="cancelBonusBtn">Отмена</button>
                <button class="btn btn-primary" id="confirmBonusBtn">Применить бонусы</button>
            </div>
        </div>
    </div>

    <!-- Модальное окно календаря -->
    <div class="calendar-modal" id="calendarModal">
        <div class="calendar-modal-content">
            <button class="calendar-modal-close" id="calendarModalClose">
                <i class="fas fa-times"></i>
            </button>
            <h3 style="margin-bottom: 15px;">Выберите дату рождения</h3>
            <div class="custom-datepicker" id="customDatepicker">
                <!-- Добавляем элементы для быстрого выбора года и месяца -->
                <div class="datepicker-controls">
                    <select class="datepicker-select" id="yearSelect">
                        <!-- Годы будут заполнены через JavaScript -->
                    </select>
                    <select class="datepicker-select" id="monthSelect">
                        <!-- Месяцы будут заполнены через JavaScript -->
                    </select>
                </div>
                <div class="datepicker-header">
                    <button class="datepicker-nav" id="prevMonth">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <div class="datepicker-current" id="currentMonthYear"></div>
                    <button class="datepicker-nav" id="nextMonth">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
                <div class="datepicker-weekdays">
                    <div class="datepicker-weekday">Пн</div>
                    <div class="datepicker-weekday">Вт</div>
                    <div class="datepicker-weekday">Ср</div>
                    <div class="datepicker-weekday">Чт</div>
                    <div class="datepicker-weekday">Пт</div>
                    <div class="datepicker-weekday">Сб</div>
                    <div class="datepicker-weekday">Вс</div>
                </div>
                <div class="datepicker-days" id="datepickerDays"></div>
                <div class="datepicker-footer">
                    <button class="datepicker-today-btn" id="todayBtn">Сегодня</button>
                    <button class="datepicker-clear-btn" id="clearDateBtn">Очистить</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Уведомление об операциях -->
    <div class="notification" id="operationNotification">
        <div class="notification-icon">
            <i class="fas fa-check-circle"></i>
        </div>
        <div class="notification-content">
            <strong>Успешно!</strong> Операция выполнена.
        </div>
    </div>

    <!-- Основной контент личного кабинета -->
    <main class="dashboard">
        <div class="container dashboard-container">
            <!-- Боковое меню -->
            <aside class="sidebar">
                <div class="user-info">
                    <h3>Иван Иванов</h3>
                    <p>Бонусов: <span id="userBonusBalance">1,750</span></p>
                </div>
                            
                <nav>
                    <ul class="sidebar-menu">
                        <li class="sidebar-item">
                            <a href="#overview" class="sidebar-link active" data-section="overview">
                                <i class="fas fa-home"></i> Обзор
                            </a>
                        </li>
                        <li class="sidebar-item">
                            <a href="#bookings" class="sidebar-link" data-section="bookings">
                                <i class="fas fa-ticket-alt"></i> Мои билеты
                            </a>
                        </li>
                        <li class="sidebar-item">
                            <a href="#bonuses" class="sidebar-link" data-section="bonuses">
                                <i class="fas fa-star"></i> Бонусы
                            </a>
                        </li>
                        <li class="sidebar-item">
                            <a href="#history" class="sidebar-link" data-section="history">
                                <i class="fas fa-history"></i> История просмотров
                            </a>
                        </li>
                        <li class="sidebar-item">
                            <a href="#preferences" class="sidebar-link" data-section="preferences">
                                <i class="fas fa-cog"></i> Настройки
                            </a>
                        </li>
                    </ul>
                </nav>
            </aside>

            <!-- Основной контент -->
            <div class="dashboard-content">
                <!-- Раздел Обзор -->
                <section id="overview" class="content-section">
                    <div class="page-header">
                        <h1>Обзор личного кабинета</h1>
                        <p>Здесь вы можете увидеть ваши активные билеты, бонусы и предстоящие сеансы</p>
                    </div>
                    
                    <!-- Карточка бонусов -->
                    <div class="balance-card">
                        <div class="balance-title">Ваши бонусы</div>
                        <div class="balance-amount" id="overviewBonusBalance">1,750</div>
                        <div class="balance-status">
                            <span class="status-badge status-success">Доступно для использования</span>
                            <span class="status-badge status-warning">Следующее начисление: 01.01.2026</span>
                        </div>
                    </div>

                    <!-- Быстрые действия -->
                    <div class="quick-actions">
                        <h2>Быстрые действия</h2>
                        <div class="actions-grid">
                            <button class="action-card" data-action="buy-tickets">
                                <div class="action-icon">
                                    <i class="fas fa-film"></i>
                                </div>
                                <div class="action-title">Купить билеты</div>
                            </button>
                            <button class="action-card" data-action="my-tickets">
                                <div class="action-icon">
                                    <i class="fas fa-ticket-alt"></i>
                                </div>
                                <div class="action-title">Мои билеты</div>
                            </button>
                            <button class="action-card" data-action="use-bonuses">
                                <div class="action-icon">
                                    <i class="fas fa-star"></i>
                                </div>
                                <div class="action-title">Использовать бонусы</div>
                            </button>
                            <button class="action-card" data-action="settings">
                                <div class="action-icon">
                                    <i class="fas fa-cog"></i>
                                </div>
                                <div class="action-title">Настройки профиля</div>
                            </button>
                        </div>
                    </div>

                    <!-- Активные билеты -->
                    <div class="history-section">
                        <h2><i class="fas fa-ticket-alt"></i> Активные билеты</h2>
                        <div class="table-container">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Фильм</th>
                                        <th>Дата и время</th>
                                        <th>Зал</th>
                                        <th>Места</th>
                                        <th>Статус</th>
                                        <th>Действия</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Мажор в Дубае</td>
                                        <td>04.12.2025 19:45</td>
                                        <td>Зал 3 (IMAX)</td>
                                        <td>Ряд 5, Места 12-13</td>
                                        <td><span class="status-badge status-completed">Активен</span></td>
                                        <td>
                                            <div class="table-actions">
                                                <button class="btn btn-outline btn-sm show-qr-btn" 
                                                        data-movie="Аватар: Путь воды" 
                                                        data-date="15.12.2025 19:30" 
                                                        data-hall="Зал 3 (IMAX)" 
                                                        data-seats="Ряд 5, Места 12-13"
                                                        data-qr-src="images/QR-код.png"
                                                        data-price="1200">
                                                    <i class="fas fa-qrcode"></i> QR-код
                                                </button>
                                                <button class="btn btn-outline btn-sm refund-btn" 
                                                        data-movie="Аватар: Путь воды" 
                                                        data-date="15.12.2025 19:30" 
                                                        data-hall="Зал 3 (IMAX)" 
                                                        data-seats="Ряд 5, Места 12-13"
                                                        data-price="1200">
                                                    <i class="fas fa-times"></i> Вернуть
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Алиса в стране чудес</td>
                                        <td>28.11.2025 18:25</td>
                                        <td>Зал 1</td>
                                        <td>Ряд 7, Место 8-9</td>
                                        <td><span class="status-badge status-completed">Активен</span></td>
                                        <td>
                                            <div class="table-actions">
                                                <button class="btn btn-outline btn-sm show-qr-btn" 
                                                        data-movie="Оппенгеймер" 
                                                        data-date="18.12.2025 21:00" 
                                                        data-hall="Зал 1" 
                                                        data-seats="Ряд 7, Место 8"
                                                        data-qr-src="images/QR-код.png"
                                                        data-price="450">
                                                    <i class="fas fa-qrcode"></i> QR-код
                                                </button>
                                                <button class="btn btn-outline btn-sm refund-btn" 
                                                        data-movie="Оппенгеймер" 
                                                        data-date="18.12.2025 21:00" 
                                                        data-hall="Зал 1" 
                                                        data-seats="Ряд 7, Место 8"
                                                        data-price="450">
                                                    <i class="fas fa-times"></i> Вернуть
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- Раздел Мои билеты -->
                <section id="bookings" class="content-section" style="display: none;">
                    <div class="page-header">
                        <h1>Мои билеты</h1>
                        <p>Управление вашими билетами и история покупок</p>
                    </div>

                    <!-- Карточка с предупреждением -->
                    <div class="info-card warning">
                        <div class="info-header">
                            <h3><i class="fas fa-exclamation-triangle"></i> Важная информация</h3>
                        </div>
                        <p>Возврат билетов возможен не позднее чем за 1 час до начала сеанса. В случае отмены сеанса стоимость билетов будет автоматически возвращена на вашу карту.</p>
                    </div>

                    <!-- Активные билеты -->
                    <div class="history-section">
                        <h2><i class="fas fa-ticket-alt"></i> Активные билеты</h2>
                        <div class="table-container">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Фильм</th>
                                        <th>Дата и время</th>
                                        <th>Зал</th>
                                        <th>Места</th>
                                        <th>Сумма</th>
                                        <th>Статус</th>
                                        <th>Действия</th>
                                    </tr>
                                </thead>
                                <tbody id="activeTicketsBody">
                                    <tr>
                                        <td>Мажор в Дубае</td>
                                        <td>04.12.2025 19:45</td>
                                        <td>Зал 3 (IMAX)</td>
                                        <td>Ряд 5, Места 12-13</td>
                                        <td>1,200 ₽</td>
                                        <td><span class="status-badge status-completed">Активен</span></td>
                                        <td>
                                            <div class="table-actions">
                                                <button class="btn btn-outline btn-sm show-qr-btn" 
                                                        data-movie="Мажор в Дубае" 
                                                        data-date="04.12.2025 19:45" 
                                                        data-hall="Зал 3 (IMAX)" 
                                                        data-seats="Ряд 5, Места 12-13"
                                                        data-qr-src="images/QR-код.png"
                                                        data-price="1200">
                                                    <i class="fas fa-qrcode"></i> QR-код
                                                </button>
                                                <button class="btn btn-outline btn-sm refund-btn" 
                                                        data-movie="Мажор в Дубае" 
                                                        data-date="04.12.2025 19:45" 
                                                        data-hall="Зал 3 (IMAX)" 
                                                        data-seats="Ряд 5, Места 12-13"
                                                        data-price="1200">
                                                    <i class="fas fa-times"></i> Вернуть
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Алиса в стране чудес</td>
                                        <td>28.11.2025 18:25</td>
                                        <td>Зал 1</td>
                                        <td>Ряд 7, Место 8-9</td>
                                        <td>700 ₽</td>
                                        <td><span class="status-badge status-completed">Активен</span></td>
                                        <td>
                                            <div class="table-actions">
                                                <button class="btn btn-outline btn-sm show-qr-btn" 
                                                        data-movie="Алиса в стране чудес" 
                                                        data-date="28.11.2025 18:25" 
                                                        data-hall="Зал 1" 
                                                        data-seats="Ряд 7, Место 8-9"
                                                        data-qr-src="images/QR-код.png"
                                                        data-price="700">
                                                    <i class="fas fa-qrcode"></i> QR-код
                                                </button>
                                                <button class="btn btn-outline btn-sm refund-btn" 
                                                        data-movie="Оппенгеймер" 
                                                        data-date="28.11.2025 18:25" 
                                                        data-hall="Зал 1" 
                                                        data-seats="Ряд 7, Место 8-9"
                                                        data-price="700">
                                                    <i class="fas fa-times"></i> Вернуть
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- История покупок -->
                    <div class="history-section">
                        <h2><i class="fas fa-history"></i> История покупок</h2>
                        <div class="table-container">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Фильм</th>
                                        <th>Дата сеанса</th>
                                        <th>Зал</th>
                                        <th>Места</th>
                                        <th>Сумма</th>
                                        <th>Статус</th>
                                    </tr>
                                </thead>
                                <tbody id="purchaseHistoryBody">
                                    <tr>
                                        <td>Аватар: Путь воды</td>
                                        <td>06.10.2025 18:00</td>
                                        <td>Зал 2</td>
                                        <td>Ряд 4, Места 5-6</td>
                                        <td>900 ₽</td>
                                        <td><span class="status-badge status-completed">Просмотрен</span></td>
                                    </tr>
                                    <tr>
                                        <td>Приключение паддингтона 3</td>
                                        <td>10.12.2024 17:20</td>
                                        <td>Зал 4</td>
                                        <td>Ряд 6, Место 10-11</td>
                                        <td>740 ₽</td>
                                        <td><span class="status-badge status-completed">Просмотрен</span></td>
                                    </tr>
                                    <tr>
                                        <td>Отрыв</td>
                                        <td>28.10.2023 21:45</td>
                                        <td>Зал 1</td>
                                        <td>Ряд 3, Место 7-8</td>
                                        <td>900 ₽</td>
                                        <td><span class="status-badge status-completed">Просмотрен</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- Раздел Бонусы -->
                <section id="bonuses" class="content-section" style="display: none;">
                    <div class="page-header">
                        <h1>Бонусная программа</h1>
                        <p>Копите бонусы и оплачивайте ими до 50% стоимости билетов</p>
                    </div>

                    <!-- Карточка баланса бонусов -->
                    <div class="info-card success">
                        <div class="info-header">
                            <h3><i class="fas fa-star"></i> Текущий баланс бонусов</h3>
                        </div>
                        <div class="balance-summary">
                            <div class="summary-row">
                                <span>Доступно бонусов:</span>
                                <span class="amount-due" id="bonusSectionBalance">1,750</span>
                            </div>
                            <div class="summary-row">
                                <span>Стоимость 1 бонуса:</span>
                                <span class="amount-due">1 ₽</span>
                            </div>
                            <div class="summary-row">
                                <span>Максимальная скидка:</span>
                                <span class="amount-due">50% от стоимости билета</span>
                            </div>
                        </div>
                    </div>

                    <!-- Правила программы -->
                    <div class="info-card">
                        <div class="info-header">
                            <h3><i class="fas fa-info-circle"></i> Как работают бонусы?</h3>
                        </div>
                        <ul style="padding-left: 20px; margin-bottom: 0;">
                            <li>За каждый купленный билет вы получаете 10% от его стоимости в бонусах</li>
                            <li>1 бонус = 1 рубль</li>
                            <li>Бонусами можно оплачить до 50% стоимости любого билета</li>
                            <li>Бонусы действуют в течение 1 года с момента начисления</li>
                            <li>Бонусы не подлежат возврату при отмене бронирования</li>
                        </ul>
                    </div>

                    <!-- Активные билеты для использования бонусов -->
                    <div class="history-section">
                        <h2><i class="fas fa-ticket-alt"></i> Активные билеты</h2>
                        <p class="text-secondary">Выберите билет для использования бонусов. Можно оплатить до 50% стоимости билета бонусами.</p>
                        <div class="table-container">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Фильм</th>
                                        <th>Дата и время</th>
                                        <th>Зал</th>
                                        <th>Места</th>
                                        <th>Стоимость</th>
                                        <th>Макс. бонусов</th>
                                        <th>Действия</th>
                                    </tr>
                                </thead>
                                <tbody id="bonusActiveTicketsBody">
                                    <tr>
                                        <td>Мажор в Дубае</td>
                                        <td>04.12.2025 19:45</td>
                                        <td>Зал 3 (IMAX)</td>
                                        <td>Ряд 5, Места 12-13</td>
                                        <td>1,200 ₽</td>
                                        <td>600</td>
                                        <td>
                                            <div class="table-actions">
                                                <button class="btn btn-primary btn-sm use-bonus-btn" 
                                                        data-movie="Мажор в сочи" 
                                                        data-date="04.12.2025 19:45" 
                                                        data-hall="Зал 3 (IMAX)" 
                                                        data-seats="Ряд 5, Места 12-13"
                                                        data-price="1200"
                                                        data-max-bonus="600">

                                                    <i class="fas fa-star"></i> Использовать бонусы
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Алиса в стране чудес</td>
                                        <td>28.11.2025 18:25</td>
                                        <td>Зал 1</td>
                                        <td>Ряд 7, Место 8-9</td>
                                        <td>900 ₽</td>
                                        <td>450</td>
                                        <td>
                                            <div class="table-actions">
                                                <button class="btn btn-primary btn-sm use-bonus-btn" 
                                                        data-movie="Алиса в стране чудес" 
                                                        data-date="28.11.2025 18:25" 
                                                        data-hall="Зал 1" 
                                                        data-seats="Ряд 7, Место 8"
                                                        data-price="900"
                                                        data-max-bonus="450">
                                                    <i class="fas fa-star"></i> Использовать бонусы
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- История начислений -->
                    <div class="history-section">
                        <h2><i class="fas fa-history"></i> История начислений бонусов</h2>
                        <div class="table-container">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Дата</th>
                                        <th>Описание</th>
                                        <th>Начислено</th>
                                        <th>Списано</th>
                                        <th>Баланс</th>
                                    </tr>
                                </thead>
                                <tbody id="bonusHistoryBody">
                                    <tr>
                                        <td>06.10.2025</td>
                                        <td>Покупка билетов на "Аватар: Путь воды"</td>
                                        <td>350</td>
                                        <td>-</td>
                                        <td>900</td>
                                    </tr>
                                    <tr>
                                        <td>10.12.2024</td>
                                        <td>Покупка билета на "Приключения Паддингтона 3"</td>
                                        <td>280</td>
                                        <td>-</td>
                                        <td>740</td>
                                    </tr>
                                    <tr>
                                        <td>28.10.2023</td>
                                        <td>Покупка билета на "Отрыв"</td>
                                        <td>230</td>
                                        <td>-</td>
                                        <td>900</td>
                                    </tr>
                                    <tr>
                                        <td>28.12.2022</td>
                                        <td>Мажор в сочи</td>
                                        <td>150</td>
                                        <td>400</td>
                                        <td>800</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- Раздел История просмотров -->
                <section id="history" class="content-section" style="display: none;">
                    <div class="page-header">
                        <h1>История просмотров</h1>
                        <p>Ваши просмотренные фильмы и оценки</p>
                    </div>

                    <!-- Элементы управления сортировкой -->
                    <div class="sort-controls">
                        <div class="sort-control" id="sortByYear" data-sort="year" data-order="desc">
                            <span>Сортировать по году</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="sort-control" id="sortByRating" data-sort="rating" data-order="desc">
                            <span>Сортировать по рейтингу</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                    </div>

                    <!-- Список просмотренных фильмов -->
                    <div class="viewed-movies" id="viewedMoviesContainer">
                        <!-- Динамически будет заполняться через JavaScript -->
                    </div>
                </section>

                <!-- Раздел Настройки -->
                <section id="preferences" class="content-section" style="display: none;">
                    <div class="page-header">
                        <h1>Настройки профиля</h1>
                        <p>Управление личными данными и настройками аккаунта</p>
                    </div>

                    <div class="profile-layout">
                        <!-- Боковая навигация профиля -->
                        <div class="profile-sidebar">
                            <nav class="profile-nav">
                                <button class="profile-nav-item active" data-tab="personal-info">
                                    <i class="fas fa-user"></i> Личные данные
                                </button>
                                <button class="profile-nav-item" data-tab="notifications">
                                    <i class="fas fa-bell"></i> Уведомления
                                </button>
                                <button class="profile-nav-item" data-tab="security">
                                    <i class="fas fa-shield-alt"></i> Безопасность
                                </button>
                            </nav>
                        </div>

                        <!-- Основное содержимое профиля -->
                        <div class="profile-content">
                            <!-- Личные данные -->
                            <div class="profile-tab active" id="personal-info">
                                <div class="profile-card">
                                    <div class="card-header">
                                        <h3><i class="fas fa-user-circle"></i> Основная информация</h3>
                                    </div>
                                    <form class="profile-form" id="personalInfoForm">
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="firstName" class="form-label">Имя *</label>
                                                <input type="text" class="form-control" id="firstName" 
                                                       value="Иван" required>
                                            </div>
                                            <div class="form-group">
                                                <label for="lastName" class="form-label">Фамилия *</label>
                                                <input type="text" class="form-control" id="lastName" 
                                                       value="Иванов" required>
                                            </div>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="email" class="form-label">Электронная почта *</label>
                                            <input type="email" class="form-control" id="email" 
                                                   value="ivanov@example.com" required>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="phone" class="form-label">Телефон</label>
                                            <input type="tel" class="form-control" id="phone" 
                                                   value="+7 (495) 123-45-67">
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="birthdate" class="form-label">Дата рождения</label>
                                            <div class="datepicker-container">
                                                <input type="text" class="form-control" id="birthdate" 
                                                       value="1990-05-15" readonly>
                                                <button type="button" class="datepicker-toggle" id="datepickerToggle">
                                                    <i class="fas fa-calendar-alt"></i>
                                                </button>
                                            </div>
                                        </div>
                                        
                                        <div class="form-actions">
                                            <button type="submit" class="btn btn-primary">
                                                <i class="fas fa-save"></i> Сохранить изменения
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>

                            <!-- Уведомления -->
                            <div class="profile-tab" id="notifications">
                                <div class="profile-card">
                                    <div class="card-header">
                                        <h3><i class="fas fa-bell"></i> Настройки уведомлений</h3>
                                    </div>
                                    <div class="notifications-list">
                                        <div class="notification-item">
                                            <div class="notification-info">
                                                <h4>Электронная почта</h4>
                                                <p>Получать уведомления на email</p>
                                            </div>
                                            <label class="switch">
                                                <input type="checkbox" id="emailNotifications" checked>
                                                <span class="slider"></span>
                                            </label>
                                        </div>
                                        
                                        <div class="notification-item">
                                            <div class="notification-info">
                                                <h4>SMS-уведомления</h4>
                                                <p>Получать напоминания о сеансах по SMS</p>
                                            </div>
                                            <label class="switch">
                                                <input type="checkbox" id="smsNotifications" checked>
                                                <span class="slider"></span>
                                            </label>
                                        </div>
                                        
                                        <div class="notification-item">
                                            <div class="notification-info">
                                                <h4>Новости и акции</h4>
                                                <p>Уведомления о новых фильмах и специальных предложениях</p>
                                            </div>
                                            <label class="switch">
                                                <input type="checkbox" id="newsNotifications" checked>
                                                <span class="slider"></span>
                                            </label>
                                        </div>
                                        
                                        <div class="notification-item">
                                            <div class="notification-info">
                                                <h4>Напоминания о сеансах</h4>
                                                <p>Уведомления за 2 часа до начала сеанса</p>
                                            </div>
                                            <label class="switch">
                                                <input type="checkbox" id="reminderNotifications" checked>
                                                <span class="slider"></span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Безопасность -->
                            <div class="profile-tab" id="security">
                                <div class="profile-card">
                                    <div class="card-header">
                                        <h3><i class="fas fa-shield-alt"></i> Безопасность аккаунта</h3>
                                    </div>
                                    <div class="security-actions">
                                        <button class="security-btn" id="changePasswordPageBtn">
                                            <div class="security-icon">
                                                <i class="fas fa-key"></i>
                                            </div>
                                            <div class="security-info">
                                                <h4>Сменить пароль</h4>
                                                <p>Последний раз меняли 3 месяца назад</p>
                                            </div>
                                            <i class="fas fa-chevron-right"></i>
                                        </button>
                                        
                                        <button class="security-btn" id="twoFactorBtn">
                                            <div class="security-icon">
                                                <i class="fas fa-mobile-alt"></i>
                                            </div>
                                            <div class="security-info">
                                                <h4>Двухфакторная аутентификация</h4>
                                                <p>Дополнительная защита вашего аккаунта</p>
                                            </div>
                                            <label class="switch">
                                                <input type="checkbox" id="twoFactorToggle">
                                                <span class="slider"></span>
                                            </label>
                                        </button>
                                        
                                        <button class="security-btn" id="activeSessionsPageBtn">
                                            <div class="security-icon">
                                                <i class="fas fa-desktop"></i>
                                            </div>
                                            <div class="security-info">
                                                <h4>Активные сессии</h4>
                                                <p>Просмотр и управление устройствами</p>
                                            </div>
                                            <i class="fas fa-chevron-right"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <footer>
        <div class="container footer-container">
            <div class="footer-column">
                <h3 class="footer-title">Кинотеатр "КиноМир"</h3>
                <p>Ваш проводник в мир кино. Мы предлагаем лучшие фильмы, современное оборудование и незабываемые впечатления для всей семьи.</p>
            </div>
            <div class="footer-column" id="contacts">
                <h3 class="footer-title">Контакты</h3>
                <div class="footer-contact">
                    <i class="fas fa-phone"></i> +7 (495) 123-45-67
                </div>
                <div class="footer-contact">
                    <i class="fas fa-envelope"></i> info@kinomir.ru
                </div>
                <div class="footer-contact">
                    <i class="fas fa-map-marker-alt"></i> г. Барнаул, ул. Строителей, 117<br>
                    <span style="margin-left: 20px;">ТРЦ "Галактика", 3 этаж</span>
                </div>
            </div>
        </div>
        <div class="container footer-bottom">
            <p>© 2025 Кинотеатр "КиноМир". Все права защищены.</p>
        </div>
    </footer>
    
<script>
// Данные для истории просмотров
const viewedMoviesData = [
    {
        title: "Мажор в сочи",
        date: "28.12.2022",
        year: 2022,
        hall: "Зал 2",
        rating: 5,
        imageUrl: "images/Мажор в сочи.webp"
    },
    {
        title: "Пила: Спираль",
        date: "25.05.2021",
        year: 2021,
        hall: "Зал 4",
        rating: 4,
        imageUrl: "images/Пила.webp"
    },
    {
        title: "Отрыв",
        date: "28.10.2023", 
        year: 2023,         
        hall: "Зал 1",
        rating: 3,
        imageUrl: "images/Отрыв.webp"
    }
];

// Глобальные переменные
let sidebarLinks, contentSections, profileNavItems, profileTabs;
let currentRefundButton = null;
let currentBonusButton = null;
let selectedBonusAmount = 0;

// === НАЧАЛО ВСТАВКИ ВАШЕГО КОДА ===

// Функции для работы с бронированиями
function loadUserBookings() {
    const bookings = JSON.parse(localStorage.getItem('userBookings')) || [];
    const bonusBalance = parseInt(localStorage.getItem('userBonusBalance')) || 0;
    
    // Обновляем баланс бонусов во всех местах
    updateBonusBalanceInUI(bonusBalance);
    
    // Отображаем активные билеты
    renderActiveBookings(bookings);
    
    // Отображаем историю покупок
    renderPurchaseHistory(bookings);
    
    // Отображаем билеты для раздела бонусов
    renderBonusSectionBookings(bookings);
    
    return bookings;
}

function updateBonusBalanceInUI(balance) {
    const formattedBalance = balance.toLocaleString();
    
    // Обновляем баланс во всех местах интерфейса
    const balanceElements = [
        'userBonusBalance',
        'overviewBonusBalance', 
        'bonusSectionBalance'
    ];
    
    balanceElements.forEach(elementId => {
        const element = document.getElementById(elementId);
        if (element) {
            element.textContent = formattedBalance;
        }
    });
}

function renderActiveBookings(bookings) {
    const activeTicketsBody = document.getElementById('activeTicketsBody');
    if (!activeTicketsBody) return;
    
    // Фильтруем активные билеты (не возвращенные)
    const activeBookings = bookings.filter(booking => booking.status === 'Активен');
    
    if (activeBookings.length === 0) {
        activeTicketsBody.innerHTML = `
            <tr>
                <td colspan="7" style="text-align: center; padding: 40px; color: var(--text-secondary);">
                    <i class="fas fa-ticket-alt" style="font-size: 2rem; margin-bottom: 1rem; display: block;"></i>
                    <h4>Нет активных билетов</h4>
                    <p>У вас пока нет забронированных билетов</p>
                    <a href="index.html#movies" class="btn btn-primary" style="margin-top: 1rem;">
                        <i class="fas fa-film"></i> Перейти к бронированию
                    </a>
                </td>
            </tr>
        `;
        return;
    }
    
    activeTicketsBody.innerHTML = '';
    
    activeBookings.forEach(booking => {
        const row = document.createElement('tr');
        const seatsText = booking.seats.map(seat => 
            typeof seat === 'string' ? seat : seat.number
        ).join(', ');
        
        row.innerHTML = `
            <td>${booking.movie}</td>
            <td>${booking.date} ${booking.time}</td>
            <td>${booking.hall}</td>
            <td>${seatsText}</td>
            <td>${booking.total} ₽</td>
            <td><span class="status-badge status-completed">Активен</span></td>
            <td>
                <div class="table-actions">
                    <button class="btn btn-outline btn-sm show-qr-btn" 
                            data-movie="${booking.movie}" 
                            data-date="${booking.date} ${booking.time}" 
                            data-hall="${booking.hall}" 
                            data-seats="${seatsText}"
                            data-qr-src="images/QR-код.png"
                            data-price="${booking.total}">
                        <i class="fas fa-qrcode"></i> QR-код
                    </button>
                    <button class="btn btn-outline btn-sm refund-btn" 
                            data-movie="${booking.movie}" 
                            data-date="${booking.date} ${booking.time}" 
                            data-hall="${booking.hall}" 
                            data-seats="${seatsText}"
                            data-price="${booking.total}"
                            data-booking-id="${booking.id}">
                        <i class="fas fa-times"></i> Вернуть
                    </button>
                </div>
            </td>
        `;
        activeTicketsBody.appendChild(row);
    });
    
    // Обновляем также таблицу в разделе "Обзор"
    updateOverviewActiveBookings(activeBookings);
}

function updateOverviewActiveBookings(bookings) {
    const overviewTicketsBody = document.querySelector('#overview .table tbody');
    if (!overviewTicketsBody) return;
    
    const activeBookings = bookings.filter(booking => booking.status === 'Активен');
    
    if (activeBookings.length === 0) {
        overviewTicketsBody.innerHTML = `
            <tr>
                <td colspan="6" style="text-align: center; padding: 20px; color: var(--text-secondary);">
                    <i class="fas fa-ticket-alt"></i> Нет активных билетов
                </td>
            </tr>
        `;
        return;
    }
    
    overviewTicketsBody.innerHTML = '';
    
    // Показываем только последние 2 активных билета в обзоре
    activeBookings.slice(0, 2).forEach(booking => {
        const row = document.createElement('tr');
        const seatsText = booking.seats.map(seat => 
            typeof seat === 'string' ? seat : seat.number
        ).join(', ');
        
        row.innerHTML = `
            <td>${booking.movie}</td>
            <td>${booking.date} ${booking.time}</td>
            <td>${booking.hall}</td>
            <td>${seatsText}</td>
            <td><span class="status-badge status-completed">Активен</span></td>
            <td>
                <div class="table-actions">
                    <button class="btn btn-outline btn-sm show-qr-btn" 
                            data-movie="${booking.movie}" 
                            data-date="${booking.date} ${booking.time}" 
                            data-hall="${booking.hall}" 
                            data-seats="${seatsText}"
                            data-qr-src="images/QR-код.png"
                            data-price="${booking.total}">
                        <i class="fas fa-qrcode"></i> QR-код
                    </button>
                    <button class="btn btn-outline btn-sm refund-btn" 
                            data-movie="${booking.movie}" 
                            data-date="${booking.date} ${booking.time}" 
                            data-hall="${booking.hall}" 
                            data-seats="${seatsText}"
                            data-price="${booking.total}"
                            data-booking-id="${booking.id}">
                        <i class="fas fa-times"></i> Вернуть
                    </button>
                </div>
            </td>
        `;
        overviewTicketsBody.appendChild(row);
    });
}

function renderPurchaseHistory(bookings) {
    const purchaseHistoryBody = document.getElementById('purchaseHistoryBody');
    if (!purchaseHistoryBody) return;
    
    // Показываем все бронирования как историю
    const historyBookings = [...bookings].reverse(); // Новые сверху
    
    if (historyBookings.length === 0) {
        purchaseHistoryBody.innerHTML = `
            <tr>
                <td colspan="6" style="text-align: center; padding: 40px; color: var(--text-secondary);">
                    <i class="fas fa-history" style="font-size: 2rem; margin-bottom: 1rem; display: block;"></i>
                    <h4>История покупок пуста</h4>
                    <p>Здесь будут отображаться все ваши бронирования</p>
                </td>
            </tr>
        `;
        return;
    }
    
    purchaseHistoryBody.innerHTML = '';
    
    historyBookings.forEach(booking => {
        const row = document.createElement('tr');
        const seatsText = booking.seats.map(seat => 
            typeof seat === 'string' ? seat : seat.number
        ).join(', ');
        
        const status = booking.status === 'Возвращен' ? 
            '<span class="status-badge status-warning">Возвращен</span>' :
            '<span class="status-badge status-completed">Просмотрен</span>';
        
        row.innerHTML = `
            <td>${booking.movie}</td>
            <td>${booking.date} ${booking.time}</td>
            <td>${booking.hall}</td>
            <td>${seatsText}</td>
            <td>${booking.total} ₽</td>
            <td>${status}</td>
        `;
        purchaseHistoryBody.appendChild(row);
    });
}

function renderBonusSectionBookings(bookings) {
    const bonusActiveTicketsBody = document.getElementById('bonusActiveTicketsBody');
    if (!bonusActiveTicketsBody) return;
    
    const activeBookings = bookings.filter(booking => booking.status === 'Активен');
    
    if (activeBookings.length === 0) {
        bonusActiveTicketsBody.innerHTML = `
            <tr>
                <td colspan="7" style="text-align: center; padding: 40px; color: var(--text-secondary);">
                    <i class="fas fa-star" style="font-size: 2rem; margin-bottom: 1rem; display: block;"></i>
                    <h4>Нет активных билетов</h4>
                    <p>Для использования бонусов нужны активные билеты</p>
                </td>
            </tr>
        `;
        return;
    }
    
    bonusActiveTicketsBody.innerHTML = '';
    
    activeBookings.forEach(booking => {
        const row = document.createElement('tr');
        const seatsText = booking.seats.map(seat => 
            typeof seat === 'string' ? seat : seat.number
        ).join(', ');
        const maxBonus = Math.floor(booking.total * 0.5); // Максимум 50% от стоимости
        
        row.innerHTML = `
            <td>${booking.movie}</td>
            <td>${booking.date} ${booking.time}</td>
            <td>${booking.hall}</td>
            <td>${seatsText}</td>
            <td>${booking.total} ₽</td>
            <td>${maxBonus}</td>
            <td>
                <div class="table-actions">
                    <button class="btn btn-primary btn-sm use-bonus-btn" 
                            data-movie="${booking.movie}" 
                            data-date="${booking.date} ${booking.time}" 
                            data-hall="${booking.hall}" 
                            data-seats="${seatsText}"
                            data-price="${booking.total}"
                            data-max-bonus="${maxBonus}"
                            data-booking-id="${booking.id}">
                        <i class="fas fa-star"></i> Использовать бонусы
                    </button>
                </div>
            </td>
        `;
        bonusActiveTicketsBody.appendChild(row);
    });
}

// Функция возврата билета
function processTicketRefund(bookingId) {
    let bookings = JSON.parse(localStorage.getItem('userBookings')) || [];
    const bookingIndex = bookings.findIndex(b => b.id === bookingId);
    
    if (bookingIndex !== -1) {
        const booking = bookings[bookingIndex];
        
        // Помечаем как возвращенный
        bookings[bookingIndex].status = 'Возвращен';
        
        // Возвращаем часть бонусов (90% от начисленных)
        const bonusToRefund = Math.round(booking.total * 0.1 * 0.9);
        let currentBalance = parseInt(localStorage.getItem('userBonusBalance')) || 0;
        currentBalance = Math.max(0, currentBalance - bonusToRefund);
        localStorage.setItem('userBonusBalance', currentBalance);
        
        // Сохраняем обновленные данные
        localStorage.setItem('userBookings', JSON.stringify(bookings));
        
        // Обновляем интерфейс
        loadUserBookings();
        
        showNotification(`Билет возвращен. Списан ${bonusToRefund} бонусов.`, 'success');
    }
}

// === КОНЕЦ ВСТАВКИ ВАШЕГО КОДА ===

// Основные функции
function getCurrentBonusBalance() {
    const balanceElement = document.getElementById('overviewBonusBalance');
    if (balanceElement) {
        return parseInt(balanceElement.textContent.replace(/,/g, ''));
    }
    return 0;
}

function updateBonusBalance(newBalance) {
    const formattedBalance = newBalance.toLocaleString();
    
    const userBonusBalance = document.getElementById('userBonusBalance');
    if (userBonusBalance) userBonusBalance.textContent = formattedBalance;
    
    const overviewBonusBalance = document.getElementById('overviewBonusBalance');
    if (overviewBonusBalance) overviewBonusBalance.textContent = formattedBalance;
    
    const bonusSectionBalance = document.getElementById('bonusSectionBalance');
    if (bonusSectionBalance) bonusSectionBalance.textContent = formattedBalance;
}

// Навигация между разделами
function switchToSection(sectionId, tabId = null) {
    contentSections.forEach(section => {
        section.style.display = 'none';
    });
    
    const targetSection = document.getElementById(sectionId);
    if (targetSection) {
        targetSection.style.display = 'block';
    }
    
    sidebarLinks.forEach(link => {
        link.classList.remove('active');
    });
    
    const activeLink = document.querySelector(`.sidebar-link[data-section="${sectionId}"]`);
    if (activeLink) {
        activeLink.classList.add('active');
    }
    
    if (tabId) {
        activateProfileTab(tabId);
    }
    
    if (sectionId === 'history') {
        setTimeout(() => {
            renderSortedMovies(viewedMoviesData);
        }, 100);
    }
}

function activateProfileTab(tabId) {
    profileNavItems.forEach(navItem => navItem.classList.remove('active'));
    
    const targetNavItem = document.querySelector(`.profile-nav-item[data-tab="${tabId}"]`);
    if (targetNavItem) {
        targetNavItem.classList.add('active');
    }
    
    profileTabs.forEach(tab => tab.classList.remove('active'));
    
    const targetTab = document.getElementById(tabId);
    if (targetTab) {
        targetTab.classList.add('active');
    }
}

// Функции для модальных окон
function initializeModalWindows() {
    // QR модальное окно
    const qrModal = document.getElementById('qrModal');
    const qrModalClose = document.getElementById('qrModalClose');
    const showQrButtons = document.querySelectorAll('.show-qr-btn');

    function openQrModal(event) {
        const button = event.currentTarget;
        const qrSrc = button.getAttribute('data-qr-src');
        
        if (qrSrc) {
            document.getElementById('qrCodeImage').src = qrSrc;
        }
        
        qrModal.classList.add('active');
        document.body.style.overflow = 'hidden';
    }

    function closeQrModal() {
        qrModal.classList.remove('active');
        document.body.style.overflow = '';
    }

    showQrButtons.forEach(button => {
        button.addEventListener('click', openQrModal);
    });

    qrModalClose.addEventListener('click', closeQrModal);
    qrModal.addEventListener('click', function(event) {
        if (event.target === qrModal) {
            closeQrModal();
        }
    });

    // Модальное окно возврата
    const refundModal = document.getElementById('refundModal');
    const refundModalClose = document.getElementById('refundModalClose');
    const refundButtons = document.querySelectorAll('.refund-btn');
    const cancelRefundBtn = document.getElementById('cancelRefundBtn');
    const confirmRefundBtn = document.getElementById('confirmRefundBtn');

    function openRefundModal(event) {
        const button = event.currentTarget;
        currentRefundButton = button;
        
        const movie = button.getAttribute('data-movie');
        const date = button.getAttribute('data-date');
        const hall = button.getAttribute('data-hall');
        const seats = button.getAttribute('data-seats');
        const price = parseInt(button.getAttribute('data-price'));
        const bookingId = button.getAttribute('data-booking-id');
        const commission = Math.round(price * 0.1);
        const refundAmount = price - commission;
        
        document.getElementById('refundDetails').innerHTML = `
            <div class="refund-detail-row">
                <span class="refund-detail-label">Фильм:</span>
                <span class="refund-detail-value">${movie}</span>
            </div>
            <div class="refund-detail-row">
                <span class="refund-detail-label">Дата и время:</span>
                <span class="refund-detail-value">${date}</span>
            </div>
            <div class="refund-detail-row">
                <span class="refund-detail-label">Зал:</span>
                <span class="refund-detail-value">${hall}</span>
            </div>
            <div class="refund-detail-row">
                <span class="refund-detail-label">Места:</span>
                <span class="refund-detail-value">${seats}</span>
            </div>
            <div class="refund-detail-row">
                <span class="refund-detail-label">Стоимость билета:</span>
                <span class="refund-detail-value">${price} ₽</span>
            </div>
            <div class="refund-detail-row">
                <span class="refund-detail-label">Комиссия за возврат (10%):</span>
                <span class="refund-detail-value">-${commission} ₽</span>
            </div>
            <div class="refund-detail-row" style="border-top: 2px solid var(--accent-teal); padding-top: 15px; margin-top: 15px;">
                <span class="refund-detail-label" style="font-weight: 700;">Сумма к возврату:</span>
                <span class="refund-detail-value" style="font-weight: 700; color: var(--accent-teal);">${refundAmount} ₽</span>
            </div>
        `;
        
        refundModal.classList.add('active');
        document.body.style.overflow = 'hidden';
    }

    function closeRefundModal() {
        refundModal.classList.remove('active');
        document.body.style.overflow = '';
        currentRefundButton = null;
    }

    function processRefund() {
        if (!currentRefundButton) return;
        
        const bookingId = parseInt(currentRefundButton.getAttribute('data-booking-id'));
        
        if (bookingId) {
            processTicketRefund(bookingId);
        }
        
        closeRefundModal();
    }

    refundButtons.forEach(button => {
        button.addEventListener('click', openRefundModal);
    });

    refundModalClose.addEventListener('click', closeRefundModal);
    cancelRefundBtn.addEventListener('click', closeRefundModal);
    confirmRefundBtn.addEventListener('click', processRefund);

    refundModal.addEventListener('click', function(event) {
        if (event.target === refundModal) {
            closeRefundModal();
        }
    });

    // Модальное окно бонусов
    const bonusModal = document.getElementById('bonusModal');
    const bonusModalClose = document.getElementById('bonusModalClose');
    const useBonusButtons = document.querySelectorAll('.use-bonus-btn');
    const cancelBonusBtn = document.getElementById('cancelBonusBtn');
    const confirmBonusBtn = document.getElementById('confirmBonusBtn');

    function openBonusModal(event) {
        const button = event.currentTarget;
        currentBonusButton = button;
        
        const movie = button.getAttribute('data-movie');
        const date = button.getAttribute('data-date');
        const hall = button.getAttribute('data-hall');
        const seats = button.getAttribute('data-seats');
        const price = parseInt(button.getAttribute('data-price'));
        const maxBonus = parseInt(button.getAttribute('data-max-bonus'));
        
        const currentBalance = getCurrentBonusBalance();
        selectedBonusAmount = 0;
        
        document.getElementById('bonusDetails').innerHTML = `
            <div class="bonus-detail-row">
                <span class="bonus-detail-label">Фильм:</span>
                <span class="bonus-detail-value">${movie}</span>
            </div>
            <div class="bonus-detail-row">
                <span class="bonus-detail-label">Дата и время:</span>
                <span class="bonus-detail-value">${date}</span>
            </div>
            <div class="bonus-detail-row">
                <span class="bonus-detail-label">Зал:</span>
                <span class="bonus-detail-value">${hall}</span>
            </div>
            <div class="bonus-detail-row">
                <span class="bonus-detail-label">Места:</span>
                <span class="bonus-detail-value">${seats}</span>
            </div>
            <div class="bonus-detail-row">
                <span class="bonus-detail-label">Стоимость билета:</span>
                <span class="bonus-detail-value">${price} ₽</span>
            </div>
            <div class="bonus-detail-row">
                <span class="bonus-detail-label">Доступно бонусов:</span>
                <span class="bonus-detail-value">${currentBalance.toLocaleString()}</span>
            </div>
            <div class="bonus-detail-row">
                <span class="bonus-detail-label">Максимум можно использовать:</span>
                <span class="bonus-detail-value">${Math.min(maxBonus, Math.floor(currentBalance))} бонусов</span>
            </div>
            
            <div class="bonus-selection">
                <h4>Выберите количество бонусов для использования:</h4>
                
                <div class="bonus-options">
                    <div class="bonus-option" data-amount="0">
                        <div>0</div>
                        <small>Не использовать</small>
                    </div>
                    <div class="bonus-option" data-amount="${Math.min(100, maxBonus, currentBalance)}">
                        <div>${Math.min(100, maxBonus, currentBalance)}</div>
                        <small>${Math.min(100, maxBonus, currentBalance)} ₽</small>
                    </div>
                    <div class="bonus-option" data-amount="${Math.min(200, maxBonus, currentBalance)}">
                        <div>${Math.min(200, maxBonus, currentBalance)}</div>
                        <small>${Math.min(200, maxBonus, currentBalance)} ₽</small>
                    </div>
                    <div class="bonus-option" data-amount="${Math.min(maxBonus, currentBalance)}">
                        <div>${Math.min(maxBonus, currentBalance)}</div>
                        <small>${Math.min(maxBonus, currentBalance)} ₽ (макс.)</small>
                    </div>
                </div>
                
                <div class="bonus-amount-display" id="bonusAmountDisplay">
                    0 бонусов
                </div>
                
                <div class="bonus-summary">
                    <div class="bonus-detail-row">
                        <span class="bonus-detail-label">Итоговая стоимость:</span>
                        <span class="bonus-detail-value" id="finalPrice">${price} ₽</span>
                    </div>
                    <div class="bonus-detail-row">
                        <span class="bonus-detail-label">Экономия:</span>
                        <span class="bonus-detail-value" id="savingsAmount">0 ₽</span>
                    </div>
                </div>
            </div>
        `;
        
        const bonusOptions = document.querySelectorAll('.bonus-option');
        bonusOptions.forEach(option => {
            option.addEventListener('click', function() {
                bonusOptions.forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
                
                selectedBonusAmount = parseInt(this.getAttribute('data-amount'));
                
                document.getElementById('bonusAmountDisplay').textContent = `${selectedBonusAmount} бонусов`;
                document.getElementById('finalPrice').textContent = `${price - selectedBonusAmount} ₽`;
                document.getElementById('savingsAmount').textContent = `${selectedBonusAmount} ₽`;
                
                if (selectedBonusAmount > 0) {
                    confirmBonusBtn.disabled = false;
                    confirmBonusBtn.textContent = `Применить ${selectedBonusAmount} бонусов`;
                } else {
                    confirmBonusBtn.disabled = true;
                    confirmBonusBtn.textContent = 'Применить бонусы';
                }
            });
        });
        
        bonusOptions[0].classList.add('selected');
        confirmBonusBtn.disabled = true;
        
        bonusModal.classList.add('active');
        document.body.style.overflow = 'hidden';
    }

    function closeBonusModal() {
        bonusModal.classList.remove('active');
        document.body.style.overflow = '';
        currentBonusButton = null;
        selectedBonusAmount = 0;
    }

    function processBonusUse() {
        if (!currentBonusButton || selectedBonusAmount <= 0) return;
        
        const movie = currentBonusButton.getAttribute('data-movie');
        const price = parseInt(currentBonusButton.getAttribute('data-price'));
        
        const currentBalance = getCurrentBonusBalance();
        
        if (selectedBonusAmount > currentBalance) {
            showNotification('Недостаточно бонусов для выполнения операции!', 'error');
            return;
        }
        
        const newBalance = currentBalance - selectedBonusAmount;
        updateBonusBalance(newBalance);
        
        // Обновляем историю бонусов
        const bonusHistoryBody = document.getElementById('bonusHistoryBody');
        const now = new Date();
        const formattedDate = `${now.getDate().toString().padStart(2, '0')}.${(now.getMonth()+1).toString().padStart(2, '0')}.${now.getFullYear()}`;
        
        const newRow = document.createElement('tr');
        newRow.innerHTML = `
            <td>${formattedDate}</td>
            <td>Оплата бонусами билета на "${movie}"</td>
            <td>-</td>
            <td>${selectedBonusAmount}</td>
            <td>${newBalance}</td>
        `;
        bonusHistoryBody.prepend(newRow);
        
        showNotification(`Успешно использовано ${selectedBonusAmount} бонусов для билета на "${movie}"!`, 'success');
        
        // Обновляем строку в таблице
        const row = currentBonusButton.closest('tr');
        const costCell = row.querySelector('td:nth-child(5)');
        const newCost = price - selectedBonusAmount;
        costCell.textContent = `${newCost} ₽`;
        
        const maxBonusCell = row.querySelector('td:nth-child(6)');
        const newMaxBonus = Math.floor(newCost * 0.5);
        maxBonusCell.textContent = newMaxBonus;
        
        currentBonusButton.setAttribute('data-price', newCost);
        currentBonusButton.setAttribute('data-max-bonus', newMaxBonus);
        
        closeBonusModal();
    }

    useBonusButtons.forEach(button => {
        button.addEventListener('click', openBonusModal);
    });

    bonusModalClose.addEventListener('click', closeBonusModal);
    cancelBonusBtn.addEventListener('click', closeBonusModal);
    confirmBonusBtn.addEventListener('click', processBonusUse);

    bonusModal.addEventListener('click', function(event) {
        if (event.target === bonusModal) {
            closeBonusModal();
        }
    });

    // Закрытие модальных окон по Esc
    document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape') {
            if (qrModal.classList.contains('active')) closeQrModal();
            if (refundModal.classList.contains('active')) closeRefundModal();
            if (bonusModal.classList.contains('active')) closeBonusModal();
            if (document.getElementById('calendarModal').classList.contains('active')) 
                closeCalendarModal();
        }
    });
}

// Уведомления
function showNotification(message, type, duration = 5000) {
    const notification = document.getElementById('operationNotification');
    const notificationContent = notification.querySelector('.notification-content');
    
    if (notification.hideTimeout) {
        clearTimeout(notification.hideTimeout);
    }
    
    notification.className = `notification ${type}`;
    notificationContent.innerHTML = `<strong>${type === 'success' ? 'Успешно!' : type === 'info' ? 'Информация:' : type === 'warning' ? 'Внимание!' : 'Ошибка!'}</strong> ${message}`;
    
    notification.classList.add('show');
    
    if (window.location.hash.includes('preferences')) {
        duration = 10000;
    }
    
    notification.hideTimeout = setTimeout(() => {
        notification.classList.remove('show');
    }, duration);
    
    notification.addEventListener('click', function() {
        clearTimeout(notification.hideTimeout);
        notification.classList.remove('show');
    });
}

// Быстрые действия
function initializeQuickActions() {
    const quickActionButtons = document.querySelectorAll('.action-card');
    
    quickActionButtons.forEach(button => {
        button.addEventListener('click', function(e) {
            e.preventDefault();
            const action = this.getAttribute('data-action');
            
            switch(action) {
                case 'buy-tickets':
                    smoothNavigate('index.html#services');
                    break;
                case 'my-tickets':
                    smoothNavigateToSection('bookings');
                    break;
                case 'use-bonuses':
                    smoothNavigateToSection('bonuses');
                    break;
                case 'settings':
                    smoothNavigateToSection('preferences', 'personal-info');
                    break;
            }
        });
    });
}

function smoothNavigate(url) {
    const pageTransition = document.querySelector('.page-transition');
    pageTransition.classList.add('active');
    
    setTimeout(() => {
        window.location.href = url;
    }, 600);
}

function smoothNavigateToSection(sectionId, tabId = null) {
    const pageTransition = document.querySelector('.page-transition');
    pageTransition.classList.add('active');
    
    setTimeout(() => {
        pageTransition.classList.remove('active');
        switchToSection(sectionId, tabId);
    }, 300);
}

// История просмотров
function initializeSorting() {
    const sortByYear = document.getElementById('sortByYear');
    const sortByRating = document.getElementById('sortByRating');
    
    if (sortByYear) {
        sortByYear.addEventListener('click', function() {
            toggleSort(this, 'year');
        });
    }
    
    if (sortByRating) {
        sortByRating.addEventListener('click', function() {
            toggleSort(this, 'rating');
        });
    }
}

function toggleSort(element, sortType) {
    const sortControls = document.querySelectorAll('.sort-control');
    sortControls.forEach(control => {
        if (control !== element) {
            control.classList.remove('active');
            control.classList.remove('desc');
            control.classList.add('asc');
            control.setAttribute('data-order', 'asc');
        }
    });
    
    element.classList.toggle('active');
    
    const currentOrder = element.getAttribute('data-order');
    const newOrder = currentOrder === 'asc' ? 'desc' : 'asc';
    element.setAttribute('data-order', newOrder);
    
    if (newOrder === 'asc') {
        element.classList.remove('desc');
        element.classList.add('asc');
        element.querySelector('i').style.transform = 'rotate(0deg)';
    } else {
        element.classList.remove('asc');
        element.classList.add('desc');
        element.querySelector('i').style.transform = 'rotate(180deg)';
    }
    
    applySorting(sortType, newOrder);
}

function applySorting(sortType, order) {
    let filteredMovies = [...viewedMoviesData];
    
    filteredMovies.sort((a, b) => {
        let aValue, bValue;
        
        if (sortType === 'year') {
            aValue = a.year;
            bValue = b.year;
        } else if (sortType === 'rating') {
            aValue = a.rating;
            bValue = b.rating;
        }
        
        if (order === 'asc') {
            return aValue - bValue;
        } else {
            return bValue - aValue;
        }
    });
    
    renderSortedMovies(filteredMovies);
}

function renderSortedMovies(movies) {
    const container = document.getElementById('viewedMoviesContainer');
    if (!container) return;
    
    container.innerHTML = '';
    
    movies.forEach(movie => {
        const movieCard = document.createElement('div');
        movieCard.className = 'movie-card';
        movieCard.setAttribute('data-year', movie.year);
        movieCard.setAttribute('data-rating', movie.rating);
        
        let starsHtml = '';
        if (movie.rating > 0) {
            for (let i = 1; i <= 5; i++) {
                if (i <= movie.rating) {
                    starsHtml += '<i class="fas fa-star rated"></i>';
                } else {
                    starsHtml += '<i class="fas fa-star"></i>';
                }
            }
        } else {
            starsHtml = '<span class="text-secondary">Без оценки</span>';
        }
        
        const posterHtml = movie.imageUrl 
            ? `<img src="${movie.imageUrl}" alt="${movie.title}">`
            : '';
            
        movieCard.innerHTML = `
            <div class="movie-poster">
                ${posterHtml}
            </div>
            <div class="movie-info">
                <h3 class="movie-title">${movie.title}</h3>
                <div class="movie-meta">
                    <span>Просмотрено: ${movie.date}</span>
                    <span>${movie.hall}</span>
                </div>
                <div class="movie-rating">
                    <strong>Ваша оценка:</strong>
                    <div class="stars">
                        ${starsHtml}
                    </div>
                </div>
            </div>
        `;
        
        container.appendChild(movieCard);
    });
    
    if (movies.length === 0) {
        container.innerHTML = `
            <div class="no-results" style="grid-column: 1 / -1; text-align: center; padding: 40px; color: var(--text-secondary);">
                <i class="fas fa-film" style="font-size: 3rem; margin-bottom: 1rem;"></i>
                <h3>Фильмы не найдены</h3>
                <p>Попробуйте изменить параметры фильтрации</p>
            </div>
        `;
    }
}

// Настройки профиля
function initializePersonalDataForm() {
    const personalInfoForm = document.getElementById('personalInfoForm');
    
    function savePersonalData() {
        const firstName = document.getElementById('firstName').value;
        const lastName = document.getElementById('lastName').value;
        const email = document.getElementById('email').value;
        const phone = document.getElementById('phone').value;
        const birthdate = document.getElementById('birthdate').value;
        
        const userData = {
            firstName: firstName,
            lastName: lastName,
            email: email,
            phone: phone,
            birthdate: birthdate
        };
        
        localStorage.setItem('userPersonalData', JSON.stringify(userData));
        updateUserInfoInSidebar(firstName, lastName);
        showNotification('Личные данные успешно сохранены!', 'success');
    }

    function loadPersonalData() {
        const savedData = localStorage.getItem('userPersonalData');
        
        if (savedData) {
            const userData = JSON.parse(savedData);
            
            document.getElementById('firstName').value = userData.firstName || '';
            document.getElementById('lastName').value = userData.lastName || '';
            document.getElementById('email').value = userData.email || '';
            document.getElementById('phone').value = userData.phone || '';
            document.getElementById('birthdate').value = userData.birthdate || '';
            
            updateUserInfoInSidebar(userData.firstName, userData.lastName);
        }
    }

    function updateUserInfoInSidebar(firstName, lastName) {
        const userNameElement = document.querySelector('.user-info h3');
        if (userNameElement && firstName && lastName) {
            userNameElement.textContent = `${firstName} ${lastName}`;
        }
    }
    
    if (personalInfoForm) {
        loadPersonalData();
        
        personalInfoForm.addEventListener('submit', function(e) {
            e.preventDefault();
            showNotification('Сохранение данных...', 'info');
            
            setTimeout(() => {
                savePersonalData();
            }, 1000);
        });
    }
}

// Календарь
function initializeCustomDatepicker() {
    const datepickerToggle = document.getElementById('datepickerToggle');
    const calendarModal = document.getElementById('calendarModal');
    const calendarModalClose = document.getElementById('calendarModalClose');
    const birthdateInput = document.getElementById('birthdate');
    const prevMonthBtn = document.getElementById('prevMonth');
    const nextMonthBtn = document.getElementById('nextMonth');
    const currentMonthYear = document.getElementById('currentMonthYear');
    const datepickerDays = document.getElementById('datepickerDays');
    const todayBtn = document.getElementById('todayBtn');
    const clearDateBtn = document.getElementById('clearDateBtn');
    const yearSelect = document.getElementById('yearSelect');
    const monthSelect = document.getElementById('monthSelect');
    
    let currentDate = new Date();
    let selectedDate = null;
    
    function createLocalDate(year, month, day) {
        return new Date(year, month, day);
    }
    
    function formatDate(date) {
        if (!date) return '';
        const year = date.getFullYear();
        const month = String(date.getMonth() + 1).padStart(2, '0');
        const day = String(date.getDate()).padStart(2, '0');
        return `${year}-${month}-${day}`;
    }
    
    function parseDate(dateString) {
        if (!dateString) return null;
        const parts = dateString.split('-');
        if (parts.length !== 3) return null;
        const year = parseInt(parts[0], 10);
        const month = parseInt(parts[1], 10) - 1;
        const day = parseInt(parts[2], 10);
        return createLocalDate(year, month, day);
    }
    
    function initDatepicker() {
        if (birthdateInput.value) {
            selectedDate = parseDate(birthdateInput.value);
            if (selectedDate) {
                currentDate = new Date(selectedDate);
            }
        }
        
        populateYearSelect();
        populateMonthSelect();
        renderCalendar();
        setupEventListeners();
    }
    
    function populateYearSelect() {
        const currentYear = new Date().getFullYear();
        const startYear = currentYear - 100;
        const endYear = currentYear;
        
        yearSelect.innerHTML = '';
        
        for (let year = endYear; year >= startYear; year--) {
            const option = document.createElement('option');
            option.value = year;
            option.textContent = year;
            yearSelect.appendChild(option);
        }
        
        yearSelect.value = currentDate.getFullYear();
    }
    
    function populateMonthSelect() {
        const monthNames = [
            'Январь', 'Февраль', 'Март', 'Апрель', 'Май', 'Июнь',
            'Июль', 'Август', 'Сентябрь', 'Октябрь', 'Ноябрь', 'Декабрь'
        ];
        
        monthSelect.innerHTML = '';
        
        monthNames.forEach((month, index) => {
            const option = document.createElement('option');
            option.value = index;
            option.textContent = month;
            monthSelect.appendChild(option);
        });
        
        monthSelect.value = currentDate.getMonth();
    }
    
    function renderCalendar() {
        const year = currentDate.getFullYear();
        const month = currentDate.getMonth();
        
        const monthNames = [
            'Январь', 'Февраль', 'Март', 'Апрель', 'Май', 'Июнь',
            'Июль', 'Август', 'Сентябрь', 'Октябрь', 'Ноябрь', 'Декабрь'
        ];
        currentMonthYear.textContent = `${monthNames[month]} ${year}`;
        
        yearSelect.value = year;
        monthSelect.value = month;
        
        datepickerDays.innerHTML = '';
        
        const firstDay = createLocalDate(year, month, 1);
        const lastDay = createLocalDate(year, month + 1, 0);
        const daysInMonth = lastDay.getDate();
        
        let firstDayOfWeek = firstDay.getDay();
        firstDayOfWeek = firstDayOfWeek === 0 ? 6 : firstDayOfWeek - 1;
        
        for (let i = 0; i < firstDayOfWeek; i++) {
            const emptyDay = document.createElement('div');
            emptyDay.className = 'datepicker-day other-month';
            datepickerDays.appendChild(emptyDay);
        }
        
        const today = new Date();
        today.setHours(0, 0, 0, 0);
        
        for (let day = 1; day <= daysInMonth; day++) {
            const date = createLocalDate(year, month, day);
            const dayElement = document.createElement('div');
            dayElement.className = 'datepicker-day';
            dayElement.textContent = day;
            dayElement.dataset.date = formatDate(date);
            
            if (date.getTime() === today.getTime()) {
                dayElement.classList.add('today');
            }
            
            if (selectedDate && date.getTime() === selectedDate.getTime()) {
                dayElement.classList.add('selected');
            }
            
            if (date > today) {
                dayElement.classList.add('disabled');
            }
            
            datepickerDays.appendChild(dayElement);
        }
    }
    
    function setupEventListeners() {
        datepickerToggle.addEventListener('click', function(e) {
            e.stopPropagation();
            calendarModal.classList.add('active');
            document.body.style.overflow = 'hidden';
        });
        
        calendarModalClose.addEventListener('click', closeCalendarModal);
        
        calendarModal.addEventListener('click', function(e) {
            if (e.target === calendarModal) {
                closeCalendarModal();
            }
        });
        
        prevMonthBtn.addEventListener('click', function() {
            currentDate.setMonth(currentDate.getMonth() - 1);
            renderCalendar();
        });
        
        nextMonthBtn.addEventListener('click', function() {
            currentDate.setMonth(currentDate.getMonth() + 1);
            renderCalendar();
        });
        
        yearSelect.addEventListener('change', function() {
            currentDate.setFullYear(parseInt(this.value));
            renderCalendar();
        });
        
        monthSelect.addEventListener('change', function() {
            currentDate.setMonth(parseInt(this.value));
            renderCalendar();
        });
        
        datepickerDays.addEventListener('click', function(e) {
            if (e.target.classList.contains('datepicker-day') && !e.target.classList.contains('other-month') && !e.target.classList.contains('disabled')) {
                const previouslySelected = datepickerDays.querySelector('.datepicker-day.selected');
                if (previouslySelected) {
                    previouslySelected.classList.remove('selected');
                }
                
                e.target.classList.add('selected');
                
                const day = parseInt(e.target.textContent);
                const month = currentDate.getMonth();
                const year = currentDate.getFullYear();
                selectedDate = createLocalDate(year, month, day);
                
                birthdateInput.value = formatDate(selectedDate);
                closeCalendarModal();
            }
        });
        
        todayBtn.addEventListener('click', function() {
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            if (today <= new Date()) {
                selectedDate = today;
                currentDate = new Date(today);
                birthdateInput.value = formatDate(today);
                renderCalendar();
                closeCalendarModal();
            }
        });
        
        clearDateBtn.addEventListener('click', function() {
            selectedDate = null;
            birthdateInput.value = '';
            renderCalendar();
            closeCalendarModal();
        });
    }
    
    function closeCalendarModal() {
        calendarModal.classList.remove('active');
        document.body.style.overflow = '';
    }
    
    initDatepicker();
}

// Инициализация при загрузке
document.addEventListener('DOMContentLoaded', function() {
    // Плавающие элементы
    const floatingContainer = document.getElementById('floatingElements');
    for (let i = 0; i < 8; i++) {
        const element = document.createElement('div');
        element.className = 'floating-element';
        element.style.width = `${Math.random() * 100 + 50}px`;
        element.style.height = element.style.width;
        element.style.top = `${Math.random() * 100}%`;
        element.style.left = `${Math.random() * 100}%`;
        element.style.animationDelay = `${Math.random() * 10}s`;
        element.style.animationDuration = `${Math.random() * 20 + 10}s`;
        floatingContainer.appendChild(element);
    }

    // Анимация появления элементов
    const elementsToAnimate = document.querySelectorAll('.content-section, .dashboard-content h1, .dashboard-content h2');
    elementsToAnimate.forEach((element, index) => {
        element.style.animationDelay = `${index * 0.1}s`;
    });

    // Эффект при скролле для шапки
    window.addEventListener('scroll', function() {
        const header = document.querySelector('header');
        if (window.scrollY > 50) {
            header.style.background = 'rgba(15, 28, 46, 0.98)';
            header.style.boxShadow = 'var(--shadow-lg)';
        } else {
            header.style.background = 'rgba(15, 28, 46, 0.95)';
            header.style.boxShadow = 'var(--shadow-md)';
        }
    });

    // Глобальные переменные
    sidebarLinks = document.querySelectorAll('.sidebar-link');
    contentSections = document.querySelectorAll('.content-section');
    profileNavItems = document.querySelectorAll('.profile-nav-item');
    profileTabs = document.querySelectorAll('.profile-tab');

    // Инициализация - показываем раздел "Обзор" по умолчанию
    switchToSection('overview');

    // Обработчики кликов для бокового меню
    sidebarLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const targetSection = this.getAttribute('data-section');
            switchToSection(targetSection);
        });
    });

    // Переключение между вкладками в профиле
    profileNavItems.forEach(item => {
        item.addEventListener('click', function() {
            const targetTab = this.getAttribute('data-tab');
            activateProfileTab(targetTab);
        });
    });

    // Мобильное меню
    const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
    const navMenu = document.querySelector('.nav-menu');
    const headerActions = document.querySelector('.header-actions');

    if (mobileMenuBtn) {
        mobileMenuBtn.addEventListener('click', function() {
            navMenu.classList.toggle('active');
            headerActions.classList.toggle('active');
        });
    }

    // Функционал кнопки "Выйти"
    const logoutBtn = document.getElementById('logoutBtn');
    if (logoutBtn) {
        logoutBtn.addEventListener('click', function() {
            if (confirm('Вы уверены, что хотите выйти из аккаунта?')) {
                const pageTransition = document.querySelector('.page-transition');
                pageTransition.classList.add('active');
                
                setTimeout(() => {
                    window.location.href = 'index.html';
                }, 600);
            }
        });
    }

    // Инициализация всех модулей
    initializeModalWindows();
    initializeQuickActions();
    initializeSorting();
    initializePersonalDataForm();
    initializeCustomDatepicker();

    // Загружаем данные пользователя
    loadUserBookings();

    // Обновляем данные каждые 5 секунд для синхронизации
    setInterval(loadUserBookings, 5000);

    // Слушаем изменения в localStorage для обновления в реальном времени
    window.addEventListener('storage', function(e) {
        if (e.key === 'userBookings' || e.key === 'userBonusBalance') {
            loadUserBookings();
            showNotification('Данные обновлены', 'info', 2000);
        }
    });

    // Инициализация уведомлений
    const notificationSwitches = [
        { id: 'emailNotifications', messageOn: 'Уведомления по email включены', messageOff: 'Уведомления по email отключены' },
        { id: 'smsNotifications', messageOn: 'SMS-уведомления включены', messageOff: 'SMS-уведомления отключены' },
        { id: 'newsNotifications', messageOn: 'Уведомления о новостях и акциях включены', messageOff: 'Уведомления о новостях и акциях отключены' },
        { id: 'reminderNotifications', messageOn: 'Напоминания о сеансах включены', messageOff: 'Напоминания о сеансах отключены' }
    ];

    notificationSwitches.forEach(switchConfig => {
        const switchElement = document.getElementById(switchConfig.id);
        if (switchElement) {
            switchElement.addEventListener('change', function() {
                const message = this.checked ? switchConfig.messageOn : switchConfig.messageOff;
                showNotification(message, 'info', 10000);
            });
        }
    });

    // Двухфакторная аутентификация
    const twoFactorToggle = document.getElementById('twoFactorToggle');
    if (twoFactorToggle) {
        twoFactorToggle.addEventListener('change', function() {
            const message = this.checked ? 
                'Двухфакторная аутентификация включена' : 
                'Двухфакторная аутентификация отключена';
            showNotification(message, 'info', 10000);
        });
    }

    // Перенаправление на страницы безопасности
    const changePasswordBtn = document.getElementById('changePasswordPageBtn');
    const activeSessionsBtn = document.getElementById('activeSessionsPageBtn');

    function navigateToPage(url) {
        const pageTransition = document.querySelector('.page-transition');
        pageTransition.classList.add('active');
        
        setTimeout(() => {
            window.location.href = url;
        }, 600);
    }

    if (changePasswordBtn) {
        changePasswordBtn.addEventListener('click', function() {
            navigateToPage('password-change.html');
        });
    }

    if (activeSessionsBtn) {
        activeSessionsBtn.addEventListener('click', function() {
            navigateToPage('active-sessions.html');
        });
    }

    // Интерактивность карточек и кнопок
    const actionCards = document.querySelectorAll('.action-card');
    actionCards.forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-8px)';
            this.style.boxShadow = 'var(--shadow-xl)';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0)';
            this.style.boxShadow = 'var(--shadow-sm)';
        });
    });

    const buttons = document.querySelectorAll('.btn');
    buttons.forEach(button => {
        button.addEventListener('mouseenter', function() {
            if (!this.disabled) {
                this.style.transform = 'translateY(-2px)';
            }
        });
        
        button.addEventListener('mouseleave', function() {
            if (!this.disabled) {
                this.style.transform = 'translateY(0)';
            }
        });
    });
});
















</script>
</body>
</html>